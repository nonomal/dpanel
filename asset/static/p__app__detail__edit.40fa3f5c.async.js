"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{75516:function(je,U,t){t.d(U,{Z:function(){return D}});var Y=t(89035),s=t(37476),z=t(38345),f=t(97462),g=t(62370),I=t(54006),b=t(14726),ee=t(63490),W=t(78045),N=t(67294),m=t(85893);function D(p){return(0,m.jsx)(s.Y,{trigger:(0,m.jsx)(b.ZP,{type:"dashed",icon:(0,m.jsx)(Y.Z,{}),children:"Console"}),submitter:!1,children:(0,m.jsxs)(z.Z,{children:[(0,m.jsx)(f.Z,{name:["entryCmd"],children:function(o){var d=o.entryCmd,j=d?"/bin/"+d:"/bin/sh";return(0,m.jsx)(ee.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",key:"name",dataIndex:"name",ellipsis:!0},{title:"\u5DE5\u4F5C\u76EE\u5F55",key:"workDir",dataIndex:"workDir"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",width:150},{title:"\u64CD\u4F5C",key:"status",width:150,render:function(V,re,ne){return(0,m.jsx)(I.Link,{to:"/console/".concat(p.container.Id,"?cmd=").concat(encodeURIComponent(j),"&workDir=").concat(encodeURIComponent(p.workDir?p.workDir:p.container.Config.WorkingDir)),target:"_blank",children:"\u767B\u5F55"})}}],dataSource:[{key:1,name:p.container.Id,status:p.container.State.Status,workDir:p.workDir?p.workDir:p.container.Config.WorkingDir}],rowKey:"key",pagination:!1})}}),(0,m.jsx)(g.Z,{name:"entryCmd",label:"Shell\u73AF\u5883\uFF08\u4EC5\u505A\u9ED8\u8BA4\u73AF\u5883\uFF0C\u767B\u5F55\u540E\u53EF\u5207\u6362\u81F3\u5176\u4ED6\u73AF\u5883\uFF09",style:{marginTop:15},initialValue:"sh",children:(0,m.jsxs)(W.ZP.Group,{children:[(0,m.jsx)(W.ZP,{value:"bash",children:"/bin/bash"}),(0,m.jsx)(W.ZP,{value:"sh",children:"/bin/sh"})]})})]})})}},78498:function(je,U,t){t.d(U,{Z:function(){return I}});var Y=t(25035),s=t(42075),z=t(83062),f=t(67294),g=t(85893);function I(b){return(0,g.jsxs)(s.Z,{children:[b.title,(0,g.jsx)(z.Z,{title:b.help,children:(0,g.jsx)(Y.Z,{})})]})}},42196:function(je,U,t){t.r(U),t.d(U,{default:function(){return Ye}});var Y=t(15009),s=t.n(Y),z=t(99289),f=t.n(z),g=t(5574),I=t.n(g),b=t(14946),ee=t(29158),W=t(48689),N=t(38345),m=t(10641),D=t(42075),p=t(25593),de=t(83062),o=t(67294),d=t(80821),j=t(60335),ce=t(64599),V=t.n(ce),re=t(40717),ne=t(184),J=t(14726),M=t(4798),n=t(85893);function te(P){var B=(0,o.useRef)();return[(0,n.jsx)(ne.a,{trigger:(0,n.jsx)(J.ZP,{type:"primary",icon:(0,n.jsx)(re.Z,{}),children:"\u52A0\u5165\u5DF2\u6709\u7F51\u7EDC"},"button"),width:800,formRef:B,title:"\u914D\u7F6E\u7F51\u7EDC",onFinish:function(){var T=f()(s()().mark(function C(c){var $,F,y,R,O;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.network){e.next=19;break}F=V()(c.network),e.prev=2,F.s();case 4:if((y=F.n()).done){e.next=11;break}return R=y.value,e.next=8,(0,b.HY)({name:R.name,containerName:P.containerName,containerAlise:R.alise,ipV4:R.ipV4});case 8:O=e.sent;case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),F.e(e.t0);case 16:return e.prev=16,F.f(),e.finish(16);case 19:return!(($=B.current)===null||$===void 0)&&$.resetFields&&B.current.resetFields(),P.onSuccess&&P.onSuccess(),e.abrupt("return",!0);case 22:case"end":return e.stop()}},C,null,[[2,13,16,19]])}));return function(C){return T.apply(this,arguments)}}(),children:(0,n.jsx)(M.Z,{siteName:P.containerName})},"form")]}var i=t(78498);function v(P){var B=(0,o.useRef)();return(0,n.jsx)(N.Z,{title:(0,n.jsx)(ee.Z,{}),subTitle:"\u5BB9\u5668\u5173\u8054\u4FE1\u606F",ghost:!0,extra:(0,n.jsx)(te,{onSuccess:function(){var C,c;!((C=B.current)===null||C===void 0)&&C.reloadAndRest&&((c=B.current)===null||c===void 0||c.reloadAndRest())},containerName:P.containerName}),children:(0,n.jsx)(m.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:B,pagination:!1,options:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName",width:300},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName"},{title:(0,n.jsx)(i.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(C,c,$){return c.hostName?(0,n.jsx)(D.Z,{direction:"vertical",children:c.hostName.map(function(F){if(F)return(0,n.jsx)(p.Z.Text,{copyable:!0,keyboard:!0,children:F},F)})}):(0,n.jsx)(n.Fragment,{})}},{title:"Ip",key:"ip",render:function(C,c,$,F,y){return(0,n.jsxs)(D.Z,{direction:"vertical",children:[(0,n.jsx)("span",{children:c.networkInfo.IPv4Address}),c.networkInfo.IPv6Address&&(0,n.jsx)("span",{children:c.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:100,render:function(C,c,$,F,y){return(0,n.jsx)(D.Z,{children:c.key!="bridge"&&c.key!="none"&&c.key!="host"&&c.networkName!=""&&(0,n.jsx)(de.Z,{title:"\u9000\u51FA\u7F51\u7EDC",children:(0,n.jsx)(d.Z,{confirm:"\u786E\u8BA4\u9000\u51FA\u8BE5\u7F51\u7EDC\uFF1F",type:"link",action:function(){var O;return(0,b.t9)({name:c.networkName,containerName:(O=P.containerName)!==null&&O!==void 0?O:""})},messageSuccess:"\u9000\u51FA\u6210\u529F",onSuccess:function(){var O,E;!((O=B.current)===null||O===void 0)&&O.reloadAndRest&&((E=B.current)===null||E===void 0||E.reloadAndRest())},children:(0,n.jsx)(W.Z,{})})})})}}],request:function(){var T=f()(s()().mark(function C(c,$,F){var y,R;return s()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,j.jV)({md5:P.containerName});case 2:return y=E.sent,E.next=5,(0,b._3)({name:Object.keys(y.data.info.NetworkSettings.Networks)});case 5:return R=E.sent,E.abrupt("return",{data:R.data.list,success:!0,total:R.data.list.length});case 7:case"end":return E.stop()}},C)}));return function(C,c,$){return T.apply(this,arguments)}}(),search:!1,expandable:{defaultExpandAllRows:!0,expandRowByClick:!1,defaultExpandedRowKeys:["bridge"]}})})}var L=t(44771);function a(P){return(0,n.jsx)(p.Z.Text,{copyable:!0,children:P.title})}var Ee=t(62597),ye=t(43425),me=t(74842),ue=t(87784),Ze=t(33160),xe=t(30159),Ce=t(58638),Fe=t(66659),Be=t(86548),he=t(57132),Oe=t(45605),Ie=t(238),Se=t(32319),De=t(16664),Pe=t(97269),Q=t(62370),A=t(54006),pe=t(96074),se=t(84567),_=t(65233),l=t(26412),fe=t(66309),Te=t(93162),X=t(87662),Z=t(75516),Le=t(28031),Ne=t(85576),Ue=t(63490),We=t(37476),_e=t(86615),$e=t(97462),Ke=t(5966),He=t(2831);function Ve(P){var B=Ne.Z.useModal(),T=I()(B,2),C=T[0],c=T[1],$=(0,o.useState)(),F=I()($,2),y=F[0],R=F[1],O=(0,o.useRef)(),E="";return(0,o.useEffect)(function(){var e,w;(0,He.aF)().then(function(K){R(K.data.dpanel.containerInfo)}),E=(e=localStorage.getItem("backupPath"))!==null&&e!==void 0?e:"",(w=O.current)===null||w===void 0||w.setFieldValue("backupPath",E)},[]),(0,n.jsxs)(n.Fragment,{children:[c,(0,n.jsxs)(We.Y,{modalProps:{forceRender:!0},formRef:O,title:"\u5907\u4EFD\u5BB9\u5668\u5B58\u50A8\u5377",trigger:(0,n.jsxs)(J.ZP,{children:[(0,n.jsx)(Fe.Z,{})," \u5907\u4EFD\u5B58\u50A8"]}),onFinish:function(){var e=f()(s()().mark(function w(K){var ie,H;return s()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return K.backupPath&&localStorage.setItem("backupPath",K.backupPath),ie={containerMd5:P.container.Id,backupTargetType:K.backupTargetType,backupPath:K.backupPath},K.backupTargetType=="dpanel"&&y&&y.Mounts&&y.Mounts.map(function(q){q.Destination=="/dpanel"&&(ie.backupPath=q.Type=="volume"?q.Name:ie.backupPath=q.Source)}),ae.next=5,(0,Le.vp)(ie);case 5:return H=ae.sent,C.info({title:"\u6B63\u5728\u5907\u4EFD\u5B58\u50A8\u4E2D",content:(0,n.jsx)(N.Z,{ghost:!0,style:{paddingTop:30},children:(0,n.jsx)(Ue.Z,{columns:[{title:"\u5907\u4EFD\u6587\u4EF6",key:"backup",dataIndex:"backup",width:300,render:function(be,ve,G){return(0,n.jsx)(p.Z.Paragraph,{ellipsis:{rows:5,expandable:!0},children:ve.backupTar})}},{title:"\u5907\u4EFD\u76EE\u5F55",key:"pathList",dataIndex:"pathList",render:function(be,ve,G){return ve.pathList.map(function(ge,Ae){return(0,n.jsx)("div",{children:ge},Ae)})}}],dataSource:[{key:1,backupTar:H.data.backupTar,pathList:H.data.pathList}],rowKey:"key",pagination:!1})}),closable:!0,width:800}),ae.abrupt("return",!0);case 8:case"end":return ae.stop()}},w)}));return function(w){return e.apply(this,arguments)}}(),children:[(0,n.jsx)(_e.Z.Group,{label:"\u5907\u4EFD\u76EE\u6807\u4F4D\u7F6E",name:"backupTargetType",initialValue:"dpanel",fieldProps:{defaultValue:"dpanel"},options:[{label:"DPanel \u5907\u4EFD\u76EE\u5F55\u4E2D",value:"dpanel"},{label:"\u5BBF\u4E3B\u673A\u76EE\u5F55\u4E2D",value:"host"}]}),(0,n.jsx)($e.Z,{name:["backupTargetType"],children:function(w){var K=w.backupTargetType;return K=="host"?(0,n.jsx)(Ke.Z,{label:"\u6307\u5B9A\u5BBF\u4E3B\u673A\u76EE\u5F55",tooltip:"\u8BF7\u586B\u5199\u5BBF\u4E3B\u673A\u76EE\u5F55\uFF0C\u4E0D\u5B58\u65F6\u4F1A\u65B0\u5EFA",name:"backupPath",placeholder:"/home/backup",initialValue:"/home/backup"}):(0,n.jsxs)(n.Fragment,{children:["\u5907\u4EFD\u4F4D\u4E8E DPanel \u5BB9\u5668\u4E2D\u7684 /dpanel/backup \u8DEF\u5F84 ",(0,n.jsx)(A.Link,{target:"_blank",to:"/app/detail/file/".concat(y==null?void 0:y.Id,"?tab=file&path=").concat(encodeURIComponent("/dpanel/backup")),children:"\u67E5\u770B"})]})}})]})]})}var Re=t(78451),we=t(24963),Ge=t(50070);function Ye(){var P,B,T,C=(0,o.useContext)(we.Z),c=C.message,$=C.notice,F=C.loading,y=(0,o.useContext)(Ge.AppDetailContext),R=(0,A.useParams)(),O=(0,o.useState)(),E=I()(O,2),e=E[0],w=E[1],K=(0,o.useState)(1),ie=I()(K,2),H=ie[0],le=ie[1],ae=(0,A.useNavigate)(),q=(0,o.useRef)(),be=(0,o.useState)({deleteImage:!1,deleteVolume:!1,deleteLink:!1}),ve=I()(be,2),G=ve[0],ge=ve[1],Ae=(0,o.useState)(""),ke=I()(Ae,2),ze=ke[0],Je=ke[1],Me=(0,o.useRef)();return(0,o.useEffect)(function(){var u;F.show(),y.reload(),(0,j.jV)({md5:(u=R.id)!==null&&u!==void 0?u:""}).then(function(r){var x;r.data&&(r.data.info.HostConfig.NetworkMode=="host"&&r.data.info.Config.ExposedPorts&&Object.keys(r.data.info.Config.ExposedPorts).map(function(h){r.data.info.NetworkSettings.Ports[h]=[{HostIp:"0.0.0.0",HostPort:h.substring(0,h.indexOf("/"))}]}),w(r.data.info)),(x=q.current)===null||x===void 0||x.setFieldValue("restart",r.data.info.HostConfig.RestartPolicy.Name)}).finally(function(){F.destroy()}),(0,X.pe)({groupName:"setting",name:"server"}).then(function(r){r.data.setting.value.serverIp&&Je(r.data.setting.value.serverIp)})},[H]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(N.Z,{direction:"column",gutter:[0,10],children:[(0,n.jsx)(N.Z,{title:(0,n.jsx)(ye.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",ghost:!0,children:(0,n.jsxs)(D.Z,{wrap:!0,children:[(0,n.jsx)(d.Z,{icon:(0,n.jsx)(me.Z,{}),action:function(){var r;return(0,j.IW)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",operate:"start"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return le(H+1)},disabled:e&&e.State.Running||e&&e.State.Paused,children:"\u542F\u52A8"}),(0,n.jsx)(d.Z,{action:function(){var r;return(0,j.IW)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",operate:"stop"})},messageSuccess:"\u505C\u6B62\u6210\u529F",icon:(0,n.jsx)(ue.Z,{}),onSuccess:function(){return le(H+1)},disabled:e&&e.State.Dead,children:"\u505C\u6B62"}),(0,n.jsx)(d.Z,{action:function(){var r;return(0,j.IW)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",operate:"restart"})},messageSuccess:"\u91CD\u542F\u6210\u529F",onSuccess:function(){return le(H+1)},icon:(0,n.jsx)(Ze.Z,{}),children:"\u91CD\u542F"}),(0,n.jsx)(d.Z,{action:function(){var r;return(0,j.IW)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",operate:"pause"})},messageSuccess:"\u6682\u505C\u6210\u529F",onSuccess:function(){return le(H+1)},icon:(0,n.jsx)(xe.Z,{}),disabled:e&&!e.State.Running,children:"\u6682\u505C"}),(0,n.jsx)(d.Z,{action:function(){var r;return(0,j.IW)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",operate:"unpause"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return le(H+1)},icon:(0,n.jsx)(me.Z,{}),disabled:e&&!e.State.Paused,children:"\u6062\u590D"}),(0,n.jsx)(pe.Z,{type:"vertical"}),e&&(0,n.jsx)(Z.Z,{container:e}),(0,n.jsx)(pe.Z,{type:"vertical"}),e&&(!e.Config.Labels||!e.Config.Labels["com.docker.compose.project"])&&(0,n.jsx)(d.Z,{action:function(){var r;return(0,Ee.Ct)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",deleteImage:G.deleteImage,deleteVolume:G.deleteVolume})},messageSuccess:"\u5220\u9664\u6210\u529F",danger:!0,type:"primary",icon:(0,n.jsx)(ue.Z,{}),onSuccess:function(){return ae("/app/list")},confirm:(0,n.jsxs)(D.Z,{style:{width:280},direction:"vertical",children:[(0,n.jsx)(p.Z.Text,{children:"\u5220\u9664\u5BB9\u5668\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,n.jsx)(se.Z,{name:"deleteVolume",onChange:function(r){return ge({deleteImage:G.deleteImage,deleteVolume:r.target.checked,deleteLink:G.deleteLink})},children:"\u5220\u9664\u5B58\u50A8\uFF1F"}),(0,n.jsx)(se.Z,{name:"deleteImage",onChange:function(r){return ge({deleteImage:r.target.checked,deleteVolume:G.deleteVolume,deleteLink:G.deleteLink})},children:"\u5220\u9664\u955C\u50CF\uFF1F"}),(0,n.jsx)(se.Z,{name:"deleteLink",onChange:function(r){return ge({deleteImage:G.deleteVolume,deleteVolume:G.deleteVolume,deleteLink:r.target.checked})},children:"\u5220\u9664\u5173\u8054\u5BB9\u5668\uFF1F"})]}),children:"\u5220\u9664"}),(0,n.jsx)(d.Z,{icon:(0,n.jsx)(Ce.Z,{}),action:function(){var r;return(0,j.LJ)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:""})},onSuccess:function(r){var x=new Blob([r],{type:"application/tar"});(0,Te.saveAs)(x,(e==null?void 0:e.Id)+".tar")},messageSuccess:"\u5BFC\u51FA\u6210\u529F",children:"\u5BFC\u51FA"}),(0,n.jsx)(d.Z,{icon:(0,n.jsx)(Fe.Z,{}),action:f()(s()().mark(function u(){var r,x,h;return s()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,j.Re)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",name:(x=(h=Me.current)===null||h===void 0?void 0:h.getFieldValue("saveImageName"))!==null&&x!==void 0?x:e==null?void 0:e.Name});case 2:case"end":return k.stop()}},u)})),confirmTitle:"\u955C\u50CF\u540D\u79F0",confirm:(0,n.jsx)(D.Z,{style:{width:280},direction:"vertical",children:(0,n.jsx)(Pe.A,{formRef:Me,submitter:!1,children:(0,n.jsx)(Q.Z,{name:"saveImageName",children:(0,n.jsx)(_.Z,{placeholder:"\u9ED8\u8BA4\u4E3A\u5BB9\u5668\u955C\u50CF\u540D\u79F0"})})})}),messageSuccess:"\u4FDD\u5B58\u6210\u529F",children:"\u53E6\u5B58\u4E3A\u955C\u50CF"}),e&&(0,n.jsx)(Ve,{container:e}),(0,n.jsx)(pe.Z,{type:"vertical"}),(0,n.jsx)(A.Link,{to:"/app/create/image?containerId=".concat(e==null?void 0:e.Id,"&op=update"),children:(0,n.jsx)(J.ZP,{type:"primary",icon:(0,n.jsx)(Be.Z,{}),children:"\u66F4\u65B0\u5BB9\u5668"})}),(0,n.jsx)(A.Link,{to:"/app/create/image?containerId=".concat(e==null?void 0:e.Id,"&op=copy"),children:(0,n.jsx)(J.ZP,{icon:(0,n.jsx)(he.Z,{}),children:"\u590D\u5236"})})]})}),(0,n.jsx)(N.Z,{title:(0,n.jsx)(Oe.Z,{}),subTitle:"\u5BB9\u5668\u72B6\u6001",ghost:!0,children:(0,n.jsxs)(l.Z,{column:1,bordered:!0,children:[(0,n.jsx)(l.Z.Item,{label:"ID",children:(0,n.jsx)(a,{title:e==null?void 0:e.Id})}),(0,n.jsx)(l.Z.Item,{label:"\u5BB9\u5668\u540D\u79F0",children:(0,n.jsx)(p.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u5BB9\u5668\u540D\u79F0",onChange:function(){var u=f()(s()().mark(function x(h){var S;return s()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(e!=null&&e.Id){oe.next=2;break}return oe.abrupt("return");case 2:return oe.next=4,(0,j.eE)({md5:e.Id,name:h});case 4:S=oe.sent,le(H+1),c.success("\u4FEE\u6539\u5BB9\u5668\u540D\u79F0");case 7:case"end":return oe.stop()}},x)}));function r(x){return u.apply(this,arguments)}return r}()},children:e&&e.Name})}),(0,n.jsx)(l.Z.Item,{label:(0,n.jsx)(i.Z,{title:"\u7F51\u7EDC",help:"\u9ED8\u8BA4\u7F51\u7EDC\u53EA\u652F\u6301\u901A\u8FC7ip\u8BBF\u95EE,ip\u4F1A\u968F\u7740\u5BB9\u5668\u542F\u52A8\u505C\u6B62\u6539\u53D8.\u5982\u679C\u9700\u8981\u5728\u5BB9\u5668\u5185\u4E92\u8054,\u8BF7\u901A\u8FC7\u3010\u7F16\u8F91\u7AD9\u70B9\u3011-\u3010\u6DFB\u52A0\u5173\u8054\u3011"}),children:(e==null?void 0:e.State.Running)&&(0,n.jsxs)(l.Z,{column:1,bordered:!0,children:[e.NetworkSettings.Networks&&Object.keys(e.NetworkSettings.Networks).map(function(u,r){return(0,n.jsx)(l.Z.Item,{label:u,children:u=="host"?" Host \u7F51\u7EDC\uFF0C\u4E0E\u5BBF\u4E3B\u673A\u5171\u7528\u540C\u4E00\u7F51\u7EDC":(0,n.jsxs)(D.Z,{direction:"vertical",children:[(0,n.jsx)(a,{title:e==null?void 0:e.NetworkSettings.Networks[u].IPAddress}),e==null?void 0:e.NetworkSettings.Networks[u].Gateway,e==null?void 0:e.NetworkSettings.Networks[u].MacAddress]})},"1")}),e.HostConfig.ExtraHosts&&(0,n.jsx)(l.Z.Item,{label:"\u5BBF\u4E3B\u673A\u7F51\u7EDC",children:(0,n.jsx)(D.Z,{direction:"vertical",children:e.HostConfig.ExtraHosts.map(function(u){if(u.indexOf(":")>-1){var r=u.split(":");return(0,n.jsxs)(D.Z,{children:[(0,n.jsx)(a,{title:r[0]})," - ",r[1]]})}})})},"1")]})}),(0,n.jsx)(l.Z.Item,{label:"\u72B6\u6001",children:e==null?void 0:e.State.Status}),(0,n.jsx)(l.Z.Item,{label:"\u521B\u5EFA\u65F6\u95F4",children:new Date((P=e==null?void 0:e.Created)!==null&&P!==void 0?P:"").toLocaleString()}),(0,n.jsx)(l.Z.Item,{label:"\u542F\u52A8\u65F6\u95F4",children:new Date((B=e==null?void 0:e.State.StartedAt)!==null&&B!==void 0?B:"").toLocaleString()}),(0,n.jsx)(l.Z.Item,{label:"\u91CD\u542F\u7B56\u7565",children:(0,n.jsx)(Pe.A,{onFinish:function(){var u=f()(s()().mark(function r(x){var h;return s()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(e!=null&&e.Id){k.next=2;break}return k.abrupt("return");case 2:return k.next=4,(0,j.eE)({md5:e.Id,restart:x.restart});case 4:return h=k.sent,c.success("\u4FEE\u6539\u91CD\u542F\u7B56\u7565\u6210\u529F"),k.abrupt("return");case 7:case"end":return k.stop()}},r)}));return function(r){return u.apply(this,arguments)}}(),formRef:q,children:(0,n.jsx)(L.Z,{defaultValue:e==null?void 0:e.HostConfig.RestartPolicy.Name})})})]})}),e&&e.Mounts&&e.Mounts.length>0&&(0,n.jsx)(N.Z,{title:(0,n.jsx)(Ie.Z,{}),subTitle:"\u6301\u4E45\u5B58\u50A8\u8BE6\u60C5",ghost:!0,children:(0,n.jsx)(l.Z,{column:1,bordered:!0,children:e==null?void 0:e.Mounts.map(function(u,r){return(0,n.jsx)(l.Z.Item,{labelStyle:{width:"30%"},label:u.Type=="volume"?(0,n.jsx)(Re.Z,{content:u.Name}):u.Source,children:(0,n.jsxs)(A.Link,{target:"_blank",to:"/app/detail/file/".concat(e.Id,"?tab=file&path=").concat(encodeURIComponent(u.Destination)),children:[u.Destination," ",(0,n.jsx)(Se.Z,{})]})},r)})})}),(0,n.jsx)(N.Z,{title:(0,n.jsx)(De.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",ghost:!0,children:(0,n.jsxs)(l.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(l.Z.Item,{label:"Image Tag",children:(0,n.jsx)(A.Link,{target:"_blank",to:"/image/detail/"+(e==null?void 0:e.Image),children:e==null?void 0:e.Config.Image})}),(0,n.jsx)(l.Z.Item,{label:"Image",children:e==null?void 0:e.Image}),(0,n.jsx)(l.Z.Item,{label:"Port",children:(0,n.jsx)(D.Z,{direction:"vertical",children:(e==null?void 0:e.NetworkSettings.Ports)&&Object.keys(e.NetworkSettings.Ports).map(function(u){var r,x=(r=e==null?void 0:e.NetworkSettings.Ports[u])!==null&&r!==void 0?r:[{HostPort:null,HostIp:""}];return x.map(function(h){var S=ze;return S!=""&&S.indexOf(":")>-1&&(S="[".concat(S,"]")),S==""&&h.HostIp=="::"&&(S="[::1]"),S==""&&h.HostIp=="0.0.0.0"&&(S="127.0.0.1"),S==""&&(S=h.HostIp),(0,n.jsxs)(D.Z.Compact,{children:[(0,n.jsxs)(fe.Z,{color:h.HostPort?"success":"",children:[h.HostPort?"".concat(h.HostIp,":").concat(h.HostPort," ->"):"",u]},u),h.HostPort?(0,n.jsx)("a",{href:"http://".concat(S,":").concat(h.HostPort),target:"_blank",children:(0,n.jsx)(ee.Z,{})}):""]})})})})}),(0,n.jsx)(l.Z.Item,{label:"CMD",children:(e==null?void 0:e.Config.Cmd)&&(e==null?void 0:e.Config.Cmd.join(" "))}),(0,n.jsx)(l.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.Config.Entrypoint}),(0,n.jsx)(l.Z.Item,{label:"ENV",children:(0,n.jsx)(l.Z,{column:1,bordered:!0,children:(e==null?void 0:e.Config.Env)&&e.Config.Env.map(function(u,r){var x=u.split("=");return(0,n.jsx)(l.Z.Item,{label:x[0],children:(0,n.jsx)(Re.Z,{content:x.slice(1).join("=")})},r)})})}),(0,n.jsx)(l.Z.Item,{label:"Labels",children:(0,n.jsx)(l.Z,{column:1,bordered:!0,children:e&&Object.keys(e.Config.Labels).map(function(u){return(0,n.jsx)(l.Z.Item,{label:u,children:(0,n.jsx)(p.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:e.Config.Labels[u]},children:e.Config.Labels[u]})},u)})})})]})}),(e==null?void 0:e.Name)&&(0,n.jsx)(v,{containerName:(T=e==null?void 0:e.Name)!==null&&T!==void 0?T:""})]})})}},50070:function(je,U,t){t.r(U),t.d(U,{AppDetailContext:function(){return j},default:function(){return ce}});var Y=t(15009),s=t.n(Y),z=t(99289),f=t.n(z),g=t(5574),I=t.n(g),b=t(24963),ee=t(2831),W=t(60335),N=t(41123),m=t(54006),D=t(86738),p=t(25593),de=t(50136),o=t(67294),d=t(85893),j=(0,o.createContext)({});function ce(){var V,re=(0,o.useContext)(b.Z),ne=re.lang,J=re.loading,M=(0,m.useParams)(),n=(0,m.useSearchParams)(),te=I()(n,2),i=te[0],v=te[1],L=(V=i.get("tab"))!==null&&V!==void 0?V:"edit",a=(0,o.useState)("edit"),Ee=I()(a,2),ye=Ee[0],me=Ee[1],ue=(0,m.useNavigate)(),Ze=(0,o.useState)(1),xe=I()(Ze,2),Ce=xe[0],Fe=xe[1],Be=(0,m.useAccess)(),he=[{label:(0,d.jsx)(m.Link,{to:"/app/detail/edit/".concat(M.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,d.jsx)(m.Link,{to:"/app/detail/domain/".concat(M.id,"?tab=domain"),children:"\u57DF\u540D\u7BA1\u7406"}),key:"domain"},{label:(0,d.jsx)(D.Z,{style:{width:500},title:ne("notification.title.tip"),description:"\u6587\u4EF6\u7BA1\u7406\u4F1A\u81EA\u52A8\u521B\u5EFA dpanel-plugin-exolorer \u5BB9\u5668\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F",onConfirm:function(){ue("/app/detail/file/".concat(M.id,"?tab=file")),De(he.filter(function(A){return A.key!="fileConfirm"})),me("file")},okText:"Yes",cancelText:"No",children:(0,d.jsx)(p.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"})}),key:"fileConfirm"},{label:(0,d.jsx)(p.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){ue("/app/detail/file/".concat(M.id,"?tab=file"))}},{label:(0,d.jsx)(p.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){ue("/app/detail/log/".concat(M.id,"?tab=log"))}},{label:(0,d.jsx)(p.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){ue("/app/detail/stat/".concat(M.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,d.jsx)(N.Z,{}),disabled:!0}],Oe=(0,o.useState)(he),Ie=I()(Oe,2),Se=Ie[0],De=Ie[1];(0,o.useEffect)(function(){J.show(),me(L);var Q=function(){var A=f()(s()().mark(function pe(){var se,_,l,fe;return s()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return _=he,X.next=3,(0,ee.aF)();case 3:return l=X.sent,Be.canSeeContainerDomain||(_=_.filter(function(Z){return Z.key!="domain"})),l.data.plugin.explorer.isCreated||(_=_.filter(function(Z){return Z.key!="file"})),l.data.plugin.explorer.isCreated&&(_=_.filter(function(Z){return Z.key!="fileConfirm"})),X.next=9,(0,W.jV)({md5:(se=M.id)!==null&&se!==void 0?se:""});case 9:fe=X.sent,_.map(function(Z){return Z.key=="containerName"&&(Z.label=fe.data.info.Name),(!fe.data.info.State.Running||fe.data.info.State.Restarting)&&(Z.key=="file"||Z.key=="fileConfirm"||Z.key=="stat")&&(Z.disabled=!0),Z}),De(_),J.destroy();case 13:case"end":return X.stop()}},pe)}));return function(){return A.apply(this,arguments)}}();Q()},[Ce]);var Pe=function(A){A.key!="fileConfirm"&&me(A.key)};return(0,d.jsxs)(j.Provider,{value:{reload:function(){Fe(Ce+1)}},children:[(0,d.jsx)(de.Z,{mode:"horizontal",onClick:Pe,selectedKeys:[ye],items:Se}),(0,d.jsx)(m.Outlet,{})]})}},28031:function(je,U,t){t.d(U,{C4:function(){return ce},LK:function(){return d},OQ:function(){return re},V9:function(){return I},Yx:function(){return D},ZU:function(){return N},_U:function(){return ee},gb:function(){return de},lE:function(){return n},vp:function(){return J}});var Y=t(15009),s=t.n(Y),z=t(99289),f=t.n(z),g=t(54006);function I(i){return b.apply(this,arguments)}function b(){return b=f()(s()().mark(function i(v){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/app/explorer/get-path-list",{data:v,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)})),b.apply(this,arguments)}function ee(i){return W.apply(this,arguments)}function W(){return W=f()(s()().mark(function i(v){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/app/explorer/export",{data:v,method:"POST",responseType:"blob"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)})),W.apply(this,arguments)}function N(i){return m.apply(this,arguments)}function m(){return m=f()(s()().mark(function i(v){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/app/explorer/import",{data:v,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)})),m.apply(this,arguments)}function D(i){return p.apply(this,arguments)}function p(){return p=f()(s()().mark(function i(v){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/app/explorer/delete",{data:v,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)})),p.apply(this,arguments)}function de(i){return o.apply(this,arguments)}function o(){return o=f()(s()().mark(function i(v){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/app/explorer/unzip",{data:v,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)})),o.apply(this,arguments)}function d(i){return j.apply(this,arguments)}function j(){return j=f()(s()().mark(function i(v){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/app/explorer/get-content",{data:v,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)})),j.apply(this,arguments)}function ce(i){return V.apply(this,arguments)}function V(){return V=f()(s()().mark(function i(v){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/app/explorer/import-file-content",{data:v,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)})),V.apply(this,arguments)}function re(i){return ne.apply(this,arguments)}function ne(){return ne=f()(s()().mark(function i(v){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/app/explorer/chmod",{data:v,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)})),ne.apply(this,arguments)}function J(i){return M.apply(this,arguments)}function M(){return M=f()(s()().mark(function i(v){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/app/volume/backup",{data:v,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)})),M.apply(this,arguments)}function n(i){return te.apply(this,arguments)}function te(){return te=f()(s()().mark(function i(v){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/app/explorer/get-passwd",{data:v,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)})),te.apply(this,arguments)}}}]);
