"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4202],{45742:function(K,O,e){e.d(O,{Z:function(){return D}});var j=e(87462),i=e(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM492 400h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zM340 368a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"profile",theme:"outlined"},_=E,c=e(84089),h=function(r,P){return i.createElement(c.Z,(0,j.Z)({},r,{ref:P,icon:_}))},A=i.forwardRef(h),D=A},80821:function(K,O,e){e.d(O,{Z:function(){return v}});var j=e(5574),i=e.n(j),E=e(24963),_=e(86738),c=e(14726),h=e(83062),A=e(67294),D=e(85893);function v(r){var P=(0,A.useState)(!1),s=i()(P,2),R=s[0],t=s[1],u=(0,A.useContext)(E.Z),x=u.lang,M=u.notice,T=u.message,B=function(){t(!0),r.action().then(function(g){if(t(!1),typeof r.onSuccess=="function"&&r.onSuccess(g),r.messageSuccess){var f="";typeof r.messageSuccess=="function"?f=r.messageSuccess(g):f=r.messageSuccess,f.indexOf(".")>-1&&(f=x(f)),r.asynced?T.info(f):T.success(f)}}).catch(function(g){t(!1),typeof r.onError=="function"&&r.onError(g)})};return r.confirm?(0,D.jsx)(_.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:x("notification.title.tip"),description:r.confirm,onConfirm:B,okText:"Yes",cancelText:"No",children:(0,D.jsx)(c.ZP,{disabled:r.disabled,icon:r.icon,loading:R,danger:r.danger,type:r.type,children:r.children})}):(0,D.jsx)(h.Z,{title:r.tips,children:(0,D.jsx)(c.ZP,{disabled:r.disabled,icon:r.icon,loading:R,onClick:B,danger:r.danger,type:r.type,children:r.children})})}},94359:function(K,O,e){e.d(O,{Z:function(){return R}});var j=e(67294),i=e(3089),E=e(98165),_=e(18429),c=e(8751),h=e(14313),A=e(30159),D=e(87740),v=e(66309),r=e(83062),P=e(54006),s=e(85893);function R(t){var u=(0,s.jsx)(s.Fragment,{});if(t.status=="0"&&(u=(0,s.jsx)(v.Z,{icon:(0,s.jsx)(i.Z,{}),color:"default",children:"waiting"})),t.status=="10"&&(u=(0,s.jsx)(v.Z,{icon:(0,s.jsx)(E.Z,{spin:!0}),color:"processing",children:"processing"})),t.status=="20"&&(u=(0,s.jsx)(v.Z,{icon:(0,s.jsx)(_.Z,{}),color:"error",children:"error"})),t.status=="30"&&(u=(0,s.jsx)(v.Z,{icon:(0,s.jsx)(c.Z,{}),color:"success",children:"success"})),t.status=="running"||t.status=="healthy"){var x,M;u=(0,s.jsx)(v.Z,{icon:(0,s.jsx)(h.Z,{}),color:"success",children:(x=t.message)!==null&&x!==void 0&&x.showInTag?(M=t.message)===null||M===void 0?void 0:M.content:t.status})}if(t.status=="paused"){var T,B;u=(0,s.jsx)(v.Z,{icon:(0,s.jsx)(A.Z,{}),children:(T=t.message)!==null&&T!==void 0&&T.showInTag?(B=t.message)===null||B===void 0?void 0:B.content:t.status})}if(t.status=="waiting"||t.status=="starting"){var U,g;u=(0,s.jsx)(v.Z,{icon:(0,s.jsx)(D.Z,{}),children:(U=t.message)!==null&&U!==void 0&&U.showInTag?(g=t.message)===null||g===void 0?void 0:g.content:t.status})}if(t.status=="exited"||t.status=="dead"||t.status=="removing"||t.status=="restarting"||t.status=="unhealthy"||t.status=="created"){var f,m;u=(0,s.jsx)(v.Z,{icon:(0,s.jsx)(_.Z,{}),color:"warning",children:(f=t.message)!==null&&f!==void 0&&f.showInTag?(m=t.message)===null||m===void 0?void 0:m.content:t.status})}if(t.link&&(u=(0,s.jsx)(P.Link,{to:t.link,children:u})),t.message){var a;u=(0,s.jsx)(r.Z,{placement:(a=t.message.placement)!==null&&a!==void 0?a:"top",title:t.message.content,children:u})}return(0,s.jsx)(s.Fragment,{children:u})}},74344:function(K,O,e){var j=e(5574),i=e.n(j),E=e(37476),_=e(38345),c=e(54006),h=e(67294),A=e(54964),D=e(85893),v=(0,h.forwardRef)(function(r,P){(0,h.useImperativeHandle)(P,function(){return{start:function(){for(var m=arguments.length,a=new Array(m),C=0;C<m;C++)a[C]=arguments[C];B(a.join(":")),u(!0)},reset:function(){var m;(m=g.current)===null||m===void 0||m.clear()},show:function(m){var a,C;(a=g.current)===null||a===void 0||a.clear(),(C=g.current)===null||C===void 0||C.write(m),u(!0)}}});var s=(0,h.useState)(!1),R=i()(s,2),t=R[0],u=R[1],x=(0,h.useState)(""),M=i()(x,2),T=M[0],B=M[1],U=(0,c.useModel)("subscriber"),g=(0,h.useRef)();return U.addDataHandler("image:"+T,function(f){var m;(m=g.current)===null||m===void 0||m.write(f.data)}),(0,h.useEffect)(function(){var f;(f=g.current)===null||f===void 0||f.fit()},[]),(0,D.jsx)(E.Y,{modalProps:{forceRender:!0},title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,width:1e3,onOpenChange:function(m){if(u(m),m){var a,C;(a=g.current)===null||a===void 0||a.clear(),(C=g.current)===null||C===void 0||C.fit()}},open:t,children:(0,D.jsx)(_.Z,{ghost:!0,children:(0,D.jsx)(A.Z,{showInModal:!0,width:"960px",height:"500px",ref:g})})})});O.Z=v},78451:function(K,O,e){e.d(O,{Z:function(){return E}});var j=e(67294),i=e(85893);function E(_){return(0,i.jsx)("span",{style:{width:_.width?_.width:"auto",wordBreak:"break-word"},children:_.content})}},54964:function(K,O,e){e.d(O,{a:function(){return r}});var j=e(78267),i=e.n(j),E=e(75458),_=e.n(E),c=e(67294),h=e(12320),A=e.n(h),D=e(89629),v=e(85893),r={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},P=new h.Terminal(r),s=new E.SearchAddon,R=new j.FitAddon,t=(0,c.forwardRef)(function(u,x){return(0,c.useEffect)(function(){window.addEventListener("resize",function(){u.showInModal||R.fit()}),u.style&&u.style.fontSize&&(P.options.fontSize=u.style.fontSize),P.loadAddon(R),P.loadAddon(s),P.open(document.getElementById("terminal-container")),u.showInModal||R.fit()},[]),(0,c.useImperativeHandle)(x,function(){return{write:function(T){P.write(T)},clear:function(){P.clear()},getTerminal:function(){return P},findNext:function(T){s.findNext(T)},findPrev:function(T){s.findPrevious(T)},fit:function(){R.fit()},onData:function(T){P.onData(T)}}}),(0,v.jsx)("div",{id:"terminal-container",style:{width:u.width?u.width:"100%",height:u.height?u.height:"500px"}})});O.Z=t},24963:function(K,O,e){var j=e(67294),i=(0,j.createContext)({});O.Z=i},52548:function(K,O,e){e.r(O),e.d(O,{default:function(){return C}});var j=e(15009),i=e.n(j),E=e(99289),_=e.n(E),c=e(90078),h=e(10641),A=e(14726),D=e(42075),v=e(83062),r=e(66309),P=e(96074),s=e(25593),R=e(50136),t=e(54006),u=e(18148),x=e(94359),M=e(43425),T=e(45742),B=e(80821),U=e(67294),g=e(67255),f=e(78451),m=e(74344),a=e(85893);function C(){var l=(0,U.useRef)(),I=(0,U.useRef)();return(0,a.jsxs)(c._z,{header:{extra:[(0,a.jsx)(A.ZP,{type:"primary",children:(0,a.jsx)(t.Link,{to:"/image/create",children:"\u521B\u5EFA\u955C\u50CF"})},"create"),(0,a.jsx)(A.ZP,{children:"\u62C9\u53D6\u955C\u50CF"},"pull")]},children:[(0,a.jsx)(h.Z,{scroll:{x:"max-content"},actionRef:l,rowKey:"id",columns:[{title:"\u540D\u79F0",render:function(n,d,y,W){return(0,a.jsx)(D.Z,{direction:"vertical",style:{textAlign:"left"},children:d.imageInfo&&d.imageInfo.info.Id?(0,a.jsx)(t.Link,{to:"/image/detail/".concat(d.imageInfo.info.Id),children:(0,a.jsxs)(v.Z,{title:"\u67E5\u770B\u955C\u50CF",children:[" ",d.title]})},"detail"):d.title},d.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(n,d,y,W){return d.imageInfo?d.imageInfo.info.Id==""?(0,a.jsx)(r.Z,{children:"none"},"none"):(0,a.jsx)(D.Z,{direction:"vertical",style:{textAlign:"left"},children:d.imageInfo.info.RepoTags.map(function(L,Z){return(0,a.jsx)(r.Z,{color:"#2db7f5",children:L},Z)})},d.id):(0,a.jsx)(r.Z,{color:"#2db7f5",children:d.tag},d.id)}},{title:"\u955C\u50CFId",search:!1,copyable:!0,width:300,render:function(n,d,y,W,L){return(0,a.jsx)(f.Z,{content:d.imageInfo&&d.imageInfo.info.Id})}},{title:"\u6784\u5EFA\u72B6\u6001",width:150,ellipsis:!0,search:!1,render:function(n,d,y,W){return[(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{status:d.status},d.id)},d.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:150,render:function(n,d,y,W){return(0,a.jsxs)(D.Z,{split:(0,a.jsx)(P.Z,{type:"vertical"}),children:[(0,a.jsx)(t.Link,{to:"/image/create?id="+d.id,type:"link",children:(0,a.jsx)(v.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,a.jsx)(M.Z,{})})},"rebuild"),(0,a.jsx)(s.Z.Link,{onClick:function(){var Z;(Z=I.current)===null||Z===void 0||Z.show(d.message)},children:(0,a.jsx)(v.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,a.jsx)(T.Z,{})})},"logs")]})}}],request:function(){var o=_()(i()().mark(function n(d,y,W){var L,Z,b;return i()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,u.Xn)({page:(L=d.current)!==null&&L!==void 0?L:1,pageSize:(Z=d.pageSize)!==null&&Z!==void 0?Z:10});case 2:return b=S.sent,S.abrupt("return",{data:b.data.list,success:!0,total:b.data.total});case 4:case"end":return S.stop()}},n)}));return function(n,d,y){return o.apply(this,arguments)}}(),pagination:(0,g.O)(),search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(n){var d=n.selectedRowKeys;return(0,a.jsx)(D.Z,{size:16,children:(0,a.jsx)(B.Z,{danger:!0,type:"primary",action:function(){return(0,u.$q)({id:d})},onSuccess:function(){var W,L;return!((W=l.current)===null||W===void 0)&&W.reloadAndRest&&((L=l.current)===null||L===void 0||L.reloadAndRest()),!0},onError:function(){var W,L;return!((W=l.current)===null||W===void 0)&&W.reset&&((L=l.current)===null||L===void 0||L.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,a.jsx)(R.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,a.jsx)(t.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,a.jsx)(t.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}}),(0,a.jsx)(m.Z,{ref:I})]})}},18148:function(K,O,e){e.d(O,{$q:function(){return t},Fj:function(){return f},KG:function(){return h},KX:function(){return a},T8:function(){return s},Xn:function(){return r},ao:function(){return x},c5:function(){return U},c7:function(){return T}});var j=e(15009),i=e.n(j),E=e(99289),_=e.n(E),c=e(54006);function h(l){return A.apply(this,arguments)}function A(){return A=_()(i()().mark(function l(I){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/app/image/get-list",{method:"POST",data:I}));case 1:case"end":return n.stop()}},l)})),A.apply(this,arguments)}function D(l){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime().mark(function l(I){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,request("/api/app/log/image-build",{method:"POST",data:I});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},l)})),v.apply(this,arguments)}function r(l){return P.apply(this,arguments)}function P(){return P=_()(i()().mark(function l(I){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/app/image/get-list-build",{method:"POST",data:I}));case 1:case"end":return n.stop()}},l)})),P.apply(this,arguments)}function s(l){return R.apply(this,arguments)}function R(){return R=_()(i()().mark(function l(I){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/get-build-task",{method:"POST",data:I});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},l)})),R.apply(this,arguments)}function t(l){return u.apply(this,arguments)}function u(){return u=_()(i()().mark(function l(I){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/delete-build-task",{method:"POST",data:I});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},l)})),u.apply(this,arguments)}function x(l){return M.apply(this,arguments)}function M(){return M=_()(i()().mark(function l(I){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/image-delete",{method:"POST",data:I});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},l)})),M.apply(this,arguments)}function T(){return B.apply(this,arguments)}function B(){return B=_()(i()().mark(function l(){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,c.request)("/api/app/image/image-prune",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},l)})),B.apply(this,arguments)}function U(){return g.apply(this,arguments)}function g(){return g=_()(i()().mark(function l(){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,c.request)("/api/app/image/build-prune",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},l)})),g.apply(this,arguments)}function f(l){return m.apply(this,arguments)}function m(){return m=_()(i()().mark(function l(I){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/update-title",{method:"POST",data:I});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},l)})),m.apply(this,arguments)}function a(l){return C.apply(this,arguments)}function C(){return C=_()(i()().mark(function l(I){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/app/image/tag-sync",{method:"POST",data:I}));case 1:case"end":return n.stop()}},l)})),C.apply(this,arguments)}},67255:function(K,O,e){e.d(O,{O:function(){return j},j:function(){return i}});function j(){var E,_=parseInt((E=localStorage.getItem("dpanel-pagesize"))!==null&&E!==void 0?E:"0");return{showSizeChanger:!0,defaultPageSize:_!=null?_:20}}function i(E){var _="dpanel-table-column-".concat(E),c={};if(localStorage.getItem(_)){var h;c=JSON.parse((h=localStorage.getItem(_))!==null&&h!==void 0?h:"{}")}return{defaultValue:c,onChange:function(D){localStorage.setItem("dpanel-table-column-".concat(E),JSON.stringify(D))}}}}}]);
