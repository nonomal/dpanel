"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3246],{98165:function(H,S,e){e.d(S,{Z:function(){return T}});var j=e(87462),v=e(67294),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},P=p,D=e(84089),_=function(t,x){return v.createElement(D.Z,(0,j.Z)({},t,{ref:x,icon:P}))},M=v.forwardRef(_),T=M},5966:function(H,S,e){var j=e(97685),v=e(1413),p=e(45987),P=e(21770),D=e(72723),_=e(55241),M=e(97435),T=e(67294),l=e(34692),t=e(85893),x=["fieldProps","proFieldProps"],W=["fieldProps","proFieldProps"],Z="text",m=function(n){var i=n.fieldProps,B=n.proFieldProps,y=(0,p.Z)(n,x);return(0,t.jsx)(l.Z,(0,v.Z)({valueType:Z,fieldProps:i,filedConfig:{valueType:Z},proFieldProps:B},y))},F=function(n){var i=(0,P.Z)(n.open||!1,{value:n.open,onChange:n.onOpenChange}),B=(0,j.Z)(i,2),y=B[0],J=B[1];return(0,t.jsx)(D.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(Q){var K,r=Q.getFieldValue(n.name||[]);return(0,t.jsx)(_.Z,(0,v.Z)((0,v.Z)({getPopupContainer:function(a){return a&&a.parentNode?a.parentNode:a},onOpenChange:function(a){return J(a)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(K=n.statusRender)===null||K===void 0?void 0:K.call(n,r),n.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:n.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},n.popoverProps),{},{open:y,children:n.children}))}})},h=function(n){var i=n.fieldProps,B=n.proFieldProps,y=(0,p.Z)(n,W),J=(0,T.useState)(!1),X=(0,j.Z)(J,2),Q=X[0],K=X[1];return i!=null&&i.statusRender&&y.name?(0,t.jsx)(F,{name:y.name,statusRender:i==null?void 0:i.statusRender,popoverProps:i==null?void 0:i.popoverProps,strengthText:i==null?void 0:i.strengthText,open:Q,onOpenChange:K,children:(0,t.jsx)("div",{children:(0,t.jsx)(l.Z,(0,v.Z)({valueType:"password",fieldProps:(0,v.Z)((0,v.Z)({},(0,M.Z)(i,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(s){var a;i==null||(a=i.onBlur)===null||a===void 0||a.call(i,s),K(!1)},onClick:function(s){var a;i==null||(a=i.onClick)===null||a===void 0||a.call(i,s),K(!0)}}),proFieldProps:B,filedConfig:{valueType:Z}},y))})}):(0,t.jsx)(l.Z,(0,v.Z)({valueType:"password",fieldProps:i,proFieldProps:B,filedConfig:{valueType:Z}},y))},f=m;f.Password=h,f.displayName="ProFormComponent",S.Z=f},90672:function(H,S,e){var j=e(1413),v=e(45987),p=e(67294),P=e(34692),D=e(85893),_=["fieldProps","proFieldProps"],M=function(l,t){var x=l.fieldProps,W=l.proFieldProps,Z=(0,v.Z)(l,_);return(0,D.jsx)(P.Z,(0,j.Z)({ref:t,valueType:"textarea",fieldProps:x,proFieldProps:W},Z))};S.Z=p.forwardRef(M)},80821:function(H,S,e){e.d(S,{Z:function(){return l}});var j=e(5574),v=e.n(j),p=e(24963),P=e(86738),D=e(14726),_=e(83062),M=e(67294),T=e(85893);function l(t){var x=(0,M.useState)(!1),W=v()(x,2),Z=W[0],m=W[1],F=(0,M.useContext)(p.Z),h=F.lang,f=F.notice,b=F.message,n=function(){m(!0),t.action().then(function(B){if(m(!1),typeof t.onSuccess=="function"&&t.onSuccess(B),t.messageSuccess){var y="";typeof t.messageSuccess=="function"?y=t.messageSuccess(B):y=t.messageSuccess,y.indexOf(".")>-1&&(y=h(y)),t.asynced?b.info(y):b.success(y)}}).catch(function(B){m(!1),typeof t.onError=="function"&&t.onError(B)})};return t.confirm?(0,T.jsx)(P.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:h("notification.title.tip"),description:t.confirm,onConfirm:n,okText:"Yes",cancelText:"No",children:(0,T.jsx)(D.ZP,{disabled:t.disabled,icon:t.icon,loading:Z,danger:t.danger,type:t.type,children:t.children})}):(0,T.jsx)(_.Z,{title:t.tips,children:(0,T.jsx)(D.ZP,{disabled:t.disabled,icon:t.icon,loading:Z,onClick:n,danger:t.danger,type:t.type,children:t.children})})}},44349:function(H,S,e){var j=e(97857),v=e.n(j),p=e(17186),P=e(5966),D=e(86250),_=e(67294),M=e(85893),T=(0,_.forwardRef)(function(l,t){var x=(0,_.useRef)();(0,_.useImperativeHandle)(t,function(){return{addItem:function(m,F){var h,f=(h=x.current)===null||h===void 0?void 0:h.getList(),b=!1;if(f==null||f.map(function(i){if(i.name==m){b=!0;return}}),!b){var n;(n=x.current)===null||n===void 0||n.add({name:m,value:F})}},clear:function(){var m;(m=x.current)===null||m===void 0||(m=m.getList())===null||m===void 0||m.map(function(F,h){var f;(f=x.current)===null||f===void 0||f.remove(h)})}}});var W={};return l.hideCopyButton===!0&&(W.copyIconProps=!1),l.hideDeleteButton===!0&&(W.deleteIconProps=!1),(0,M.jsx)(p.u,v()(v()({initialValue:l.initialValue,label:l.label,name:l.name,actionRef:x,creatorButtonProps:l.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(l.label?l.label:l.name)}:!1,min:l.min?l.min:0},W),{},{children:function(m,F,h){return(0,M.jsx)(D.Z,{justify:l.justify,gap:l.gap,children:l.items.map(function(f){return f.render?(0,M.jsx)("div",{children:f.render&&f.render(m,F,h)},"".concat(l.name,"-").concat(f.name,"-").concat(m.key)):(0,M.jsx)(P.Z,{width:f.width,name:f.name,label:f.label,required:f.required,rules:[{required:f.required}],disabled:f.disabled,placeholder:f.placeholder},"".concat(l.name,"-").concat(f.name,"-").concat(m.key))})})}}))});S.Z=T},24963:function(H,S,e){var j=e(67294),v=(0,j.createContext)({});S.Z=v},16372:function(H,S,e){e.r(S),e.d(S,{default:function(){return d}});var j=e(15009),v=e.n(j),p=e(99289),P=e.n(p),D=e(5574),_=e.n(D),M=e(24963),T=e(184),l=e(5966),t=e(64317),x=e(97462),W=e(90672),Z=e(14726),m=e(42075),F=e(25593),h=e(67294),f=e(44349);function b(u){return"".concat(u.seconds," ").concat(u.minutes," ").concat(u.hours," ").concat(u.dayOfMonth," ").concat(u.month," ").concat(u.dayOfWeek)}var n=e(85893),i=(0,h.forwardRef)(function(u,k){var N=(0,h.useState)(!1),E=_()(N,2),A=E[0],L=E[1],V=(0,h.useRef)(),O=(0,h.useContext)(M.Z),g=O.message,C=O.notice,G=(0,h.useState)([]),w=_()(G,2),q=w[0],ee=w[1];return(0,h.useImperativeHandle)(k,function(){return{edit:function(R){var I;(I=V.current)===null||I===void 0||I.setFieldsValue({title:R.title,name:R.name,type:R.setting.type,url:R.setting.url,id:R.id}),L(!0)}}}),(0,h.useEffect)(function(){},[]),(0,n.jsxs)(T.a,{name:"create",title:"\u6DFB\u52A0\u8BA1\u5212\u4EFB\u52A1",open:A,onOpenChange:function(R){L(R)},drawerProps:{forceRender:!0},formRef:V,trigger:(0,n.jsx)(Z.ZP,{type:"primary",children:"\u6DFB\u52A0\u8BA1\u5212\u4EFB\u52A1"}),onFinish:function(){var U=P()(v()().mark(function R(I){return v()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:I.cron&&I.cron.map(function(c){var o={seconds:"*",minutes:"*",hours:"*",dayOfMonth:"*",month:"*",dayOfWeek:"*"};switch(c.unit){case"preWeek":o.dayOfWeek=c.week,o.hours=c.hours,o.minutes=c.minutes;break;case"preMonth":o.hours=c.hours,o.minutes=c.minutes,o.dayOfMonth=c.day;break;case"preDay":o.hours=c.hours,o.minutes=c.minutes;break;case"preHour":o.minutes=c.minutes;break;case"preAtDay":o.hours=c.hours,o.minutes=c.minutes,o.dayOfMonth="*/"+c.day;break;case"preAtHour":o.hours="*/"+c.hours,o.minutes=c.minutes;break;case"preAtMinute":o.minutes="*/"+c.minutes;break;case"preAtSecond":o.seconds="*/"+c.seconds;break;case"code":var Y=c.code.split(" ");Y.length<6&&g.error("\u8BA1\u5212\u4EFB\u52A1\u8868\u8FBE\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u6309\u3010\u79D2 \u5206 \u65F6 \u65E5 \u6708 \u661F\u671F\u3011\u914D\u7F6E"),o.seconds=Y[0],o.minutes=Y[1],o.hours=Y[2],o.dayOfMonth=Y[3],o.month=Y[4],o.dayOfWeek=Y[5];break}console.log(b(o))});case 1:case"end":return z.stop()}},R)}));return function(R){return U.apply(this,arguments)}}(),children:[(0,n.jsx)(l.Z,{name:"id",hidden:!0}),(0,n.jsx)(l.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],placeholder:"\u8BA1\u5212\u4EFB\u52A1\u540D\u79F0"}),(0,n.jsx)(f.Z,{initialValue:[{}],hideCopyButton:!0,name:"cron",label:"\u6267\u884C\u5468\u671F",showAddButton:!0,gap:3,min:1,justify:"flex-start",items:[{name:"unit",render:function(R,I,$){return(0,n.jsx)(t.Z,{initialValue:"preWeek",name:"unit",onChange:function(c){$.setCurrentRowData({day:"",hours:"",minutes:"",seconds:""})},valueEnum:{preMonth:"\u6BCF\u6708",preWeek:"\u6BCF\u5468",preDay:"\u6BCF\u5929",preHour:"\u6BCF\u5C0F\u65F6",preAtDay:"\u6BCF N \u65E5",preAtHour:"\u6BCF N \u65F6",preAtMinute:"\u6BCF N \u5206",preAtSecond:"\u6BCF N \u79D2",code:"\u81EA\u5B9A\u4E49"}})}},{name:"week",render:function(R,I,$){return(0,n.jsx)(x.Z,{name:["unit"],children:function(c){var o=c.unit;if(o=="preWeek")return(0,n.jsx)(t.Z,{initialValue:"1",name:"week",valueEnum:{1:"\u5468\u4E00",2:"\u5468\u4E8C",3:"\u5468\u4E09",4:"\u5468\u56DB",5:"\u5468\u4E94",6:"\u5468\u516D",0:"\u5468\u65E5"}})}})}},{name:"day",render:function(R,I,$){return(0,n.jsx)(x.Z,{name:["unit"],children:function(c){var o=c.unit;if(o=="preMonth"||o=="preAtDay")return(0,n.jsx)(l.Z,{name:"day",fieldProps:{addonAfter:"\u65E5"},required:!0,rules:[{required:!0}],placeholder:"1-31"})}})}},{name:"hours",render:function(R,I,$){return(0,n.jsx)(x.Z,{name:["unit"],children:function(c){var o=c.unit;if(o!="preAtSecond"&&o!="preAtMinute"&&o!="preHour"&&o!="code")return(0,n.jsx)(l.Z,{required:!0,rules:[{required:!0}],name:"hours",fieldProps:{addonAfter:"\u65F6"},placeholder:"0-23"})}})}},{name:"minutes",render:function(R,I,$){return(0,n.jsx)(x.Z,{name:["unit"],children:function(c){var o=c.unit;if(o!="preAtSecond"&&o!="code")return(0,n.jsx)(l.Z,{required:!0,rules:[{required:!0}],name:"minutes",placeholder:"0-59",fieldProps:{addonAfter:"\u5206"}})}})}},{name:"seconds",render:function(R,I,$){return(0,n.jsx)(x.Z,{name:["unit"],children:function(c){var o=c.unit;if(o=="preAtSecond")return(0,n.jsx)(l.Z,{required:!0,rules:[{required:!0}],placeholder:"0-59",name:"seconds",fieldProps:{addonAfter:"\u79D2"}})}})}},{name:"code",render:function(R,I,$){return(0,n.jsx)(x.Z,{name:["unit"],children:function(c){var o=c.unit;if(o=="code")return(0,n.jsx)(l.Z,{required:!0,rules:[{required:!0}],placeholder:"* 3 2 * * 2",name:"code"})}})}}]}),(0,n.jsx)(t.Z,{name:"container",label:"\u6267\u884C\u5BB9\u5668"}),(0,n.jsx)(W.Z,{name:"script",label:(0,n.jsxs)(m.Z,{children:["\u6267\u884C\u811A\u672C",(0,n.jsx)(F.Z.Link,{children:"\u9884\u8BBE\u811A\u672C\u6A21\u677F"})]}),placeholder:"\u8BF7\u8F93\u5165\u8981\u6267\u884C\u7684\u811A\u672C\uFF0C\u53EA\u53EF\u4E3A\u5355\u884C\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})]})}),B=i,y=e(80821),J=e(67255),X=e(43425),Q=e(98165),K=e(90078),r=e(10641),s=e(96074),a=e(83062);function d(){var u=(0,h.useRef)(),k=(0,h.useRef)();return(0,n.jsx)(K._z,{header:{extra:[(0,n.jsx)(B,{ref:k,onFinish:function(){var E,A;!((E=u.current)===null||E===void 0)&&E.reloadAndRest&&((A=u.current)===null||A===void 0||A.reloadAndRest())}},"create")]},children:(0,n.jsx)(r.Z,{scroll:{x:"max-content"},rowKey:"id",pagination:(0,J.O)(),columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",width:500,search:!1,render:function(E,A,L,V,O){return(0,n.jsx)("a",{href:A.setting.url,target:"_blank",children:(0,n.jsx)(Tag,{children:A.setting.url})})}},{title:"\u6700\u540E\u66F4\u65B0",render:function(E,A,L,V,O){if(A.setting.updatedAt)return new Date(A.setting.updatedAt*1e3).toLocaleString()}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(E,A,L,V,O){return(0,n.jsxs)(m.Z,{split:(0,n.jsx)(s.Z,{type:"vertical"}),children:[(0,n.jsx)(F.Z.Link,{onClick:function(){var C;(C=k.current)===null||C===void 0||C.edit(A)},children:(0,n.jsx)(a.Z,{title:"\u7BA1\u7406",children:(0,n.jsx)(X.Z,{})})},"manage"),(0,n.jsx)(y.Z,{type:"link",icon:(0,n.jsx)(Q.Z,{}),action:function(){},onSuccess:function(){var C,G;return!((C=u.current)===null||C===void 0)&&C.reloadAndRest&&((G=u.current)===null||G===void 0||G.reloadAndRest()),!0},onError:function(){var C,G;return!((C=u.current)===null||C===void 0)&&C.reset&&((G=u.current)===null||G===void 0||G.reset()),!0},messageSuccess:"\u66F4\u65B0\u6210\u529F",children:" "},"upgrade")]})}}],request:function(){var N=P()(v()().mark(function E(A,L,V){var O;return v()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,getAppstoreList({name:A.name,title:A.title});case 2:return O=C.sent,C.abrupt("return",{data:O.data.list,success:!0,total:O.data.list.length});case 4:case"end":return C.stop()}},E)}));return function(E,A,L){return N.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:u,tableAlertOptionRender:function(E){var A=E.selectedRowKeys,L=E.selectedRows;return(0,n.jsx)(m.Z,{size:16,children:(0,n.jsx)(y.Z,{danger:!0,type:"primary",action:function(){return deleteAppstore({id:L.map(function(O){return O.id})})},onSuccess:function(){var O,g;return!((O=u.current)===null||O===void 0)&&O.reloadAndRest&&((g=u.current)===null||g===void 0||g.reloadAndRest()),!0},onError:function(){var O,g;return!((O=u.current)===null||O===void 0)&&O.reset&&((g=u.current)===null||g===void 0||g.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"},"delete")})}})})}},67255:function(H,S,e){e.d(S,{O:function(){return j},j:function(){return v}});function j(){var p,P=parseInt((p=localStorage.getItem("dpanel-pagesize"))!==null&&p!==void 0?p:"0");return{showSizeChanger:!0,defaultPageSize:P!=null?P:20}}function v(p){var P="dpanel-table-column-".concat(p),D={};if(localStorage.getItem(P)){var _;D=JSON.parse((_=localStorage.getItem(P))!==null&&_!==void 0?_:"{}")}return{defaultValue:D,onChange:function(T){localStorage.setItem("dpanel-table-column-".concat(p),JSON.stringify(T))}}}},86250:function(H,S,e){e.d(S,{Z:function(){return K}});var j=e(67294),v=e(93967),p=e.n(v),P=e(98423),D=e(98065),_=e(53124),M=e(83559),T=e(83262);const l=["wrap","nowrap","wrap-reverse"],t=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],x=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],W=(r,s)=>{const a=s.wrap===!0?"wrap":s.wrap;return{[`${r}-wrap-${a}`]:a&&l.includes(a)}},Z=(r,s)=>{const a={};return x.forEach(d=>{a[`${r}-align-${d}`]=s.align===d}),a[`${r}-align-stretch`]=!s.align&&!!s.vertical,a},m=(r,s)=>{const a={};return t.forEach(d=>{a[`${r}-justify-${d}`]=s.justify===d}),a};function F(r,s){return p()(Object.assign(Object.assign(Object.assign({},W(r,s)),Z(r,s)),m(r,s)))}var h=F;const f=r=>{const{componentCls:s}=r;return{[s]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},b=r=>{const{componentCls:s}=r;return{[s]:{"&-gap-small":{gap:r.flexGapSM},"&-gap-middle":{gap:r.flexGap},"&-gap-large":{gap:r.flexGapLG}}}},n=r=>{const{componentCls:s}=r,a={};return l.forEach(d=>{a[`${s}-wrap-${d}`]={flexWrap:d}}),a},i=r=>{const{componentCls:s}=r,a={};return x.forEach(d=>{a[`${s}-align-${d}`]={alignItems:d}}),a},B=r=>{const{componentCls:s}=r,a={};return t.forEach(d=>{a[`${s}-justify-${d}`]={justifyContent:d}}),a},y=()=>({});var J=(0,M.I$)("Flex",r=>{const{paddingXS:s,padding:a,paddingLG:d}=r,u=(0,T.IX)(r,{flexGapSM:s,flexGap:a,flexGapLG:d});return[f(u),b(u),n(u),i(u),B(u)]},y,{resetStyle:!1}),X=function(r,s){var a={};for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&s.indexOf(d)<0&&(a[d]=r[d]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,d=Object.getOwnPropertySymbols(r);u<d.length;u++)s.indexOf(d[u])<0&&Object.prototype.propertyIsEnumerable.call(r,d[u])&&(a[d[u]]=r[d[u]]);return a},K=j.forwardRef((r,s)=>{const{prefixCls:a,rootClassName:d,className:u,style:k,flex:N,gap:E,children:A,vertical:L=!1,component:V="div"}=r,O=X(r,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:g,direction:C,getPrefixCls:G}=j.useContext(_.E_),w=G("flex",a),[q,ee,U]=J(w),R=L!=null?L:g==null?void 0:g.vertical,I=p()(u,d,g==null?void 0:g.className,w,ee,U,h(w,r),{[`${w}-rtl`]:C==="rtl",[`${w}-gap-${E}`]:(0,D.n)(E),[`${w}-vertical`]:R}),$=Object.assign(Object.assign({},g==null?void 0:g.style),k);return N&&($.flex=N),E&&!(0,D.n)(E)&&($.gap=E),q(j.createElement(V,Object.assign({ref:s,className:I,style:$},(0,P.Z)(O,["justify","wrap","align"])),A))})}}]);
