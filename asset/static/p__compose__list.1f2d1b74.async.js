(self.webpackChunk=self.webpackChunk||[]).push([[8022],{23430:function(I,C,t){"use strict";t.d(C,{Z:function(){return f}});var E=t(87462),o=t(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},c=g,m=t(84089),y=function(i,s){return o.createElement(m.Z,(0,E.Z)({},i,{ref:s,icon:c}))},O=o.forwardRef(y),f=O},80821:function(I,C,t){"use strict";t.d(C,{Z:function(){return _}});var E=t(5574),o=t.n(E),g=t(24963),c=t(86738),m=t(14726),y=t(83062),O=t(67294),f=t(85893);function _(i){var s=(0,O.useState)(!1),a=o()(s,2),v=a[0],n=a[1],u=(0,O.useContext)(g.Z),T=u.lang,A=u.notice,P=u.message,D=function(){n(!0),i.action().then(function(p){if(n(!1),typeof i.onSuccess=="function"&&i.onSuccess(p),i.messageSuccess){var M="";typeof i.messageSuccess=="function"?M=i.messageSuccess(p):M=i.messageSuccess,M.indexOf(".")>-1&&(M=T(M)),i.asynced?P.info(M):P.success(M)}}).catch(function(p){n(!1),typeof i.onError=="function"&&i.onError(p)})};return i.confirm?(0,f.jsx)(c.Z,{style:{width:500},title:i.confirmTitle?i.confirmTitle:T("notification.title.tip"),description:i.confirm,onConfirm:D,okText:"Yes",cancelText:"No",children:(0,f.jsx)(m.ZP,{disabled:i.disabled,icon:i.icon,loading:v,danger:i.danger,type:i.type,children:i.children})}):(0,f.jsx)(y.Z,{title:i.tips,children:(0,f.jsx)(m.ZP,{disabled:i.disabled,icon:i.icon,loading:v,onClick:D,danger:i.danger,type:i.type,children:i.children})})}},94359:function(I,C,t){"use strict";t.d(C,{Z:function(){return v}});var E=t(67294),o=t(3089),g=t(98165),c=t(18429),m=t(8751),y=t(14313),O=t(30159),f=t(87740),_=t(66309),i=t(83062),s=t(54006),a=t(85893);function v(n){var u=(0,a.jsx)(a.Fragment,{});if(n.status=="0"&&(u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(o.Z,{}),color:"default",children:"waiting"})),n.status=="10"&&(u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(g.Z,{spin:!0}),color:"processing",children:"processing"})),n.status=="20"&&(u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(c.Z,{}),color:"error",children:"error"})),n.status=="30"&&(u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(m.Z,{}),color:"success",children:"success"})),n.status=="running"||n.status=="healthy"){var T,A;u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(y.Z,{}),color:"success",children:(T=n.message)!==null&&T!==void 0&&T.showInTag?(A=n.message)===null||A===void 0?void 0:A.content:n.status})}if(n.status=="paused"){var P,D;u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(O.Z,{}),children:(P=n.message)!==null&&P!==void 0&&P.showInTag?(D=n.message)===null||D===void 0?void 0:D.content:n.status})}if(n.status=="waiting"||n.status=="starting"){var L,p;u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(f.Z,{}),children:(L=n.message)!==null&&L!==void 0&&L.showInTag?(p=n.message)===null||p===void 0?void 0:p.content:n.status})}if(n.status=="exited"||n.status=="dead"||n.status=="removing"||n.status=="restarting"||n.status=="unhealthy"||n.status=="created"){var M,W;u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(c.Z,{}),color:"warning",children:(M=n.message)!==null&&M!==void 0&&M.showInTag?(W=n.message)===null||W===void 0?void 0:W.content:n.status})}if(n.link&&(u=(0,a.jsx)(s.Link,{to:n.link,children:u})),n.message){var w;u=(0,a.jsx)(i.Z,{placement:(w=n.message.placement)!==null&&w!==void 0?w:"top",title:n.message.content,children:u})}return(0,a.jsx)(a.Fragment,{children:u})}},24963:function(I,C,t){"use strict";var E=t(67294),o=(0,E.createContext)({});C.Z=o},96781:function(I,C,t){"use strict";var E=t(67294),o=(0,E.createContext)({});C.Z=o},83536:function(I,C,t){"use strict";t.r(C),t.d(C,{default:function(){return k}});var E=t(15009),o=t.n(E),g=t(99289),c=t.n(g),m=t(80821),y=t(90098),O=t(43425),f=t(86548),_=t(23430),i=t(90078),s=t(10641),a=t(54006),v=t(14726),n=t(42075),u=t(96074),T=t(83062),A=t(25593),P=t(67294),D=t(96781),L=t(94359),p=t(67255),M=t(93162),W=t(24963),w=t(66309),l=t(85893);function G(Z){var b=(0,a.useIntl)(),K=(0,P.useContext)(W.Z),S=K.lang,r;if(!Z.type)r=(0,l.jsx)(w.Z,{children:S("compose.default")});else switch(Z.type){case"remoteUrl":r=(0,l.jsx)(w.Z,{color:"cyan",children:S("compose.".concat(Z.type))});break;case"serverPath":r=(0,l.jsx)(w.Z,{color:"blue",children:S("compose.".concat(Z.type))});break;case"storagePath":r=(0,l.jsx)(w.Z,{color:"geekblue",children:S("compose.".concat(Z.type))});break;case"outPath":r=(0,l.jsx)(w.Z,{color:"yellow",children:S("compose.".concat(Z.type))});break;case"store":r=(0,l.jsx)(w.Z,{color:"green",children:S("compose.".concat(Z.type))});break;default:r=(0,l.jsx)(w.Z,{children:S("compose.".concat(Z.type))})}return(0,l.jsx)(T.Z,{title:Z.tootip,children:r})}function k(){var Z=(0,P.useContext)(D.Z),b=Z.listTableRef,K=(0,P.useContext)(W.Z),S=K.lang,r=K.notice;return(0,l.jsx)(i._z,{header:{extra:[(0,l.jsx)(a.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,l.jsx)(v.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:(0,l.jsx)(s.Z,{scroll:{x:"max-content"},request:function(){var d=c()(o()().mark(function h(e){var U,j,R;return o()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,y.pm)({title:e.title,name:e.name,pageSize:(U=e.pageSize)!==null&&U!==void 0?U:10,page:(j=e.current)!==null&&j!==void 0?j:1});case 2:return R=x.sent,x.abrupt("return",{data:R.data.list,success:!0,total:R.data.list.length});case 4:case"end":return x.stop()}},h)}));return function(h){return d.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(h,e,U,j,R){return(0,l.jsx)(a.Link,{to:"/compose/deploy/"+e.id,children:e.name},U)}},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(h,e,U,j,R){var B;return(0,l.jsx)(G,{tootip:(B=e.setting.uri)!==null&&B!==void 0?B:"",type:e.setting&&e.setting.type?e.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(h,e,U,j,R){return(0,l.jsx)(n.Z,{children:e.setting.status.split(", ").map(function(B){var x="running",F=B.indexOf("(");return F>-1?x=B.slice(0,F):x=B,(0,l.jsx)(L.Z,{status:x,message:{content:S("compose.".concat(x),{count:B.slice(F+1,B.length-1)}),placement:"top",showInTag:!0}},e.id)})})}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(h,e,U,j,R){return(0,l.jsxs)(n.Z,{split:(0,l.jsx)(u.Z,{type:"vertical"}),children:[(0,l.jsx)(a.Link,{to:"/compose/deploy/"+e.id,children:(0,l.jsx)(T.Z,{title:"\u7BA1\u7406",children:(0,l.jsx)(O.Z,{})})},"3"),e.setting.type!="outPath"&&(0,l.jsx)(a.Link,{to:"/compose/create?id="+e.id,children:(0,l.jsx)(T.Z,{title:"\u7F16\u8F91",children:(0,l.jsx)(f.Z,{})})},"4"),(0,l.jsx)(A.Z.Link,{onClick:c()(o()().mark(function B(){var x,F;return o()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,y.Pn)({id:e.id});case 2:x=z.sent,x&&x.data&&x.data.detail&&(F=new Blob([x.data.detail.yaml],{type:"text/plain"}),(0,M.saveAs)(F,e.name+"-compose.yaml"));case 4:case"end":return z.stop()}},B)})),children:(0,l.jsx)(T.Z,{title:"\u4E0B\u8F7D",children:(0,l.jsx)(_.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(h){return{disabled:h.setting.type=="outPath"}}},tableAlertOptionRender:function(h){var e=h.selectedRows;return(0,l.jsx)(n.Z,{size:16,children:(0,l.jsx)(m.Z,{danger:!0,type:"primary",action:function(){return(0,y.ik)({id:e.map(function(j){return j.id})})},onSuccess:function(){var j,R;return!((j=b.current)===null||j===void 0)&&j.reloadAndRest&&((R=b.current)===null||R===void 0||R.reloadAndRest()),!0},onError:function(){var j,R;return!((j=b.current)===null||j===void 0)&&j.reset&&((R=b.current)===null||R===void 0||R.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,l.jsx)(n.Z,{style:{width:280},direction:"vertical",children:(0,l.jsx)(A.Z.Text,{children:"\u5220\u9664\u524D\u8BF7\u5148\u9500\u6BC1\u76F8\u5173\u5BB9\u5668\uFF0C\u786E\u8BA4\u5417\uFF1F"})}),children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,p.O)(),search:{collapsed:!1},actionRef:b,columnsState:(0,p.j)("compose-list")})})}},90098:function(I,C,t){"use strict";t.d(C,{CT:function(){return a},GG:function(){return L},MG:function(){return G},Oh:function(){return T},Pn:function(){return i},U_:function(){return w},VN:function(){return M},iE:function(){return K},ik:function(){return n},im:function(){return y},mg:function(){return P},pm:function(){return f},xC:function(){return Z}});var E=t(15009),o=t.n(E),g=t(99289),c=t.n(g),m=t(54006);function y(r){return O.apply(this,arguments)}function O(){return O=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/create",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),O.apply(this,arguments)}function f(r){return _.apply(this,arguments)}function _(){return _=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/get-list",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),_.apply(this,arguments)}function i(r){return s.apply(this,arguments)}function s(){return s=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/get-task",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),s.apply(this,arguments)}function a(r){return v.apply(this,arguments)}function v(){return v=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/get-detail",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function n(r){return u.apply(this,arguments)}function u(){return u=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/delete",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),u.apply(this,arguments)}function T(r){return A.apply(this,arguments)}function A(){return A=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/container-deploy",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),A.apply(this,arguments)}function P(r){return D.apply(this,arguments)}function D(){return D=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/container-destroy",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),D.apply(this,arguments)}function L(r){return p.apply(this,arguments)}function p(){return p=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/container-ctrl",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),p.apply(this,arguments)}function M(r){return W.apply(this,arguments)}function W(){return W=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/container-log",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),W.apply(this,arguments)}function w(r){return l.apply(this,arguments)}function l(){return l=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/container-process-kill",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),l.apply(this,arguments)}function G(r){return k.apply(this,arguments)}function k(){return k=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/get-from-uri",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),k.apply(this,arguments)}function Z(r){return b.apply(this,arguments)}function b(){return b=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/parse",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),b.apply(this,arguments)}function K(r){return S.apply(this,arguments)}function S(){return S=c()(o()().mark(function r(d){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/common/store/deploy",{method:"POST",data:d}));case 1:case"end":return e.stop()}},r)})),S.apply(this,arguments)}},67255:function(I,C,t){"use strict";t.d(C,{O:function(){return E},j:function(){return o}});function E(){var g,c=parseInt((g=localStorage.getItem("dpanel-pagesize"))!==null&&g!==void 0?g:"0");return{showSizeChanger:!0,defaultPageSize:c!=null?c:20}}function o(g){var c="dpanel-table-column-".concat(g),m={};if(localStorage.getItem(c)){var y;m=JSON.parse((y=localStorage.getItem(c))!==null&&y!==void 0?y:"{}")}return{defaultValue:m,onChange:function(f){localStorage.setItem("dpanel-table-column-".concat(g),JSON.stringify(f))}}}},93162:function(I,C,t){var E,o,g;(function(c,m){o=[],E=m,g=typeof E=="function"?E.apply(C,o):E,g!==void 0&&(I.exports=g)})(this,function(){"use strict";function c(s,a){return typeof a=="undefined"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function m(s,a,v){var n=new XMLHttpRequest;n.open("GET",s),n.responseType="blob",n.onload=function(){i(n.response,a,v)},n.onerror=function(){console.error("could not download file")},n.send()}function y(s){var a=new XMLHttpRequest;a.open("HEAD",s,!1);try{a.send()}catch(v){}return 200<=a.status&&299>=a.status}function O(s){try{s.dispatchEvent(new MouseEvent("click"))}catch(v){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(a)}}var f=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof t.g=="object"&&t.g.global===t.g?t.g:void 0,_=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=f.saveAs||(typeof window!="object"||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(s,a,v){var n=f.URL||f.webkitURL,u=document.createElement("a");a=a||s.name||"download",u.download=a,u.rel="noopener",typeof s=="string"?(u.href=s,u.origin===location.origin?O(u):y(u.href)?m(s,a,v):O(u,u.target="_blank")):(u.href=n.createObjectURL(s),setTimeout(function(){n.revokeObjectURL(u.href)},4e4),setTimeout(function(){O(u)},0))}:"msSaveOrOpenBlob"in navigator?function(s,a,v){if(a=a||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(c(s,v),a);else if(y(s))m(s,a,v);else{var n=document.createElement("a");n.href=s,n.target="_blank",setTimeout(function(){O(n)})}}:function(s,a,v,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof s=="string")return m(s,a,v);var u=s.type==="application/octet-stream",T=/constructor/i.test(f.HTMLElement)||f.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||u&&T||_)&&typeof FileReader!="undefined"){var P=new FileReader;P.onloadend=function(){var p=P.result;p=A?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=p:location=p,n=null},P.readAsDataURL(s)}else{var D=f.URL||f.webkitURL,L=D.createObjectURL(s);n?n.location=L:location.href=L,n=null,setTimeout(function(){D.revokeObjectURL(L)},4e4)}});f.saveAs=i.saveAs=i,I.exports=i})}}]);
