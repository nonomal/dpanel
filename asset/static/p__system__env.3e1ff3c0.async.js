"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{52688:function(J,R,e){var x=e(1413),c=e(45987),I=e(67294),L=e(34692),Z=e(85893),_=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],C=I.forwardRef(function(g,f){var r=g.fieldProps,B=g.unCheckedChildren,F=g.checkedChildren,D=g.proFieldProps,E=(0,c.Z)(g,_);return(0,Z.jsx)(L.Z,(0,x.Z)({valueType:"switch",fieldProps:(0,x.Z)({unCheckedChildren:B,checkedChildren:F},r),ref:f,valuePropName:"checked",proFieldProps:D,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},E))});R.Z=C},5966:function(J,R,e){var x=e(97685),c=e(1413),I=e(45987),L=e(21770),Z=e(72723),_=e(55241),C=e(97435),g=e(67294),f=e(34692),r=e(85893),B=["fieldProps","proFieldProps"],F=["fieldProps","proFieldProps"],D="text",E=function(t){var o=t.fieldProps,h=t.proFieldProps,u=(0,I.Z)(t,B);return(0,r.jsx)(f.Z,(0,c.Z)({valueType:D,fieldProps:o,filedConfig:{valueType:D},proFieldProps:h},u))},O=function(t){var o=(0,L.Z)(t.open||!1,{value:t.open,onChange:t.onOpenChange}),h=(0,x.Z)(o,2),u=h[0],U=h[1];return(0,r.jsx)(Z.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(V){var $,a=V.getFieldValue(t.name||[]);return(0,r.jsx)(_.Z,(0,c.Z)((0,c.Z)({getPopupContainer:function(n){return n&&n.parentNode?n.parentNode:n},onOpenChange:function(n){return U(n)},content:(0,r.jsxs)("div",{style:{padding:"4px 0"},children:[($=t.statusRender)===null||$===void 0?void 0:$.call(t,a),t.strengthText?(0,r.jsx)("div",{style:{marginTop:10},children:(0,r.jsx)("span",{children:t.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},t.popoverProps),{},{open:u,children:t.children}))}})},b=function(t){var o=t.fieldProps,h=t.proFieldProps,u=(0,I.Z)(t,F),U=(0,g.useState)(!1),N=(0,x.Z)(U,2),V=N[0],$=N[1];return o!=null&&o.statusRender&&u.name?(0,r.jsx)(O,{name:u.name,statusRender:o==null?void 0:o.statusRender,popoverProps:o==null?void 0:o.popoverProps,strengthText:o==null?void 0:o.strengthText,open:V,onOpenChange:$,children:(0,r.jsx)("div",{children:(0,r.jsx)(f.Z,(0,c.Z)({valueType:"password",fieldProps:(0,c.Z)((0,c.Z)({},(0,C.Z)(o,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(l){var n;o==null||(n=o.onBlur)===null||n===void 0||n.call(o,l),$(!1)},onClick:function(l){var n;o==null||(n=o.onClick)===null||n===void 0||n.call(o,l),$(!0)}}),proFieldProps:h,filedConfig:{valueType:D}},u))})}):(0,r.jsx)(f.Z,(0,c.Z)({valueType:"password",fieldProps:o,proFieldProps:h,filedConfig:{valueType:D}},u))},K=E;K.Password=b,K.displayName="ProFormComponent",R.Z=K},80821:function(J,R,e){e.d(R,{Z:function(){return f}});var x=e(5574),c=e.n(x),I=e(24963),L=e(86738),Z=e(14726),_=e(83062),C=e(67294),g=e(85893);function f(r){var B=(0,C.useState)(!1),F=c()(B,2),D=F[0],E=F[1],O=(0,C.useContext)(I.Z),b=O.lang,K=O.notice,j=O.message,t=function(){E(!0),r.action().then(function(h){if(E(!1),typeof r.onSuccess=="function"&&r.onSuccess(h),r.messageSuccess){var u="";typeof r.messageSuccess=="function"?u=r.messageSuccess(h):u=r.messageSuccess,u.indexOf(".")>-1&&(u=b(u)),r.asynced?j.info(u):j.success(u)}}).catch(function(h){E(!1),typeof r.onError=="function"&&r.onError(h)})};return r.confirm?(0,g.jsx)(L.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:b("notification.title.tip"),description:r.confirm,onConfirm:t,okText:"Yes",cancelText:"No",children:(0,g.jsx)(Z.ZP,{disabled:r.disabled,icon:r.icon,loading:D,danger:r.danger,type:r.type,children:r.children})}):(0,g.jsx)(_.Z,{title:r.tips,children:(0,g.jsx)(Z.ZP,{disabled:r.disabled,icon:r.icon,loading:D,onClick:t,danger:r.danger,type:r.type,children:r.children})})}},89063:function(J,R,e){e.d(R,{Z:function(){return g}});var x=e(24963),c=e(88484),I=e(62370),L=e(31418),Z=e(14726),_=e(67294),C=e(85893);function g(f){var r=(0,_.useContext)(x.Z),B=r.message,F=r.notice,D=r.lang,E=(0,_.useRef)(null),O=L.Z.useApp(),b=function(){E.current&&(E.current.click(),E.current.onchange=function(j){if(!j||!j.target)return"";var t=new FileReader;t.onload=function(h){var u,U,N=(u=h.target)===null||u===void 0?void 0:u.result;if(f.onLoad)try{f.onLoad&&f.onLoad(N)}catch(V){F.error(V);return}typeof f.onImport=="function"&&(B.success("\u6210\u529F\u5BFC\u5165 ".concat(f.title)),f.onImport(N)),(U=E.current)!==null&&U!==void 0&&U.value&&(E.current.value="")};var o=j.target;if(o.files)try{t.readAsText(o.files[0])}catch(h){F.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(I.Z,{children:(0,C.jsx)(Z.ZP,{icon:(0,C.jsx)(c.Z,{}),block:!0,onClick:b,children:f.title})}),(0,C.jsx)("input",{style:{display:"none"},type:"file",ref:E,name:"importFileInput"})]})}},24963:function(J,R,e){var x=e(67294),c=(0,x.createContext)({});R.Z=c},53893:function(J,R,e){e.r(R),e.d(R,{default:function(){return l}});var x=e(15009),c=e.n(x),I=e(99289),L=e.n(I),Z=e(80821),_=e(5574),C=e.n(_),g=e(184),f=e(5966),r=e(52688),B=e(97462),F=e(62370),D=e(14726),E=e(86250),O=e(67294),b=e(91845),K=e(87662),j=e(89063),t=e(85893),o=(0,O.forwardRef)(function(n,s){(0,O.useImperativeHandle)(s,function(){return{edit:function(i){var d;(d=P.current)===null||d===void 0||d.setFieldsValue({name:i.name,title:i.title,address:i.address,enableTLS:i.enableTLS,tlsCa:i.tlsCa,tlsCert:i.tlsCert,tlsKey:i.tlsKey}),m(!0),W(i.name)}}});var v=(0,O.useState)(!1),p=C()(v,2),T=p[0],m=p[1],P=(0,O.useRef)(),A=(0,O.useState)(""),X=C()(A,2),G=X[0],W=X[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.ZP,{onClick:function(){var i;W(""),(i=P.current)===null||i===void 0||i.resetFields(),m(!0)},type:"primary",children:"\u6DFB\u52A0Docker\u73AF\u5883"}),(0,t.jsxs)(g.a,{drawerProps:{forceRender:!0},onOpenChange:function(i){m(i)},open:T,width:800,formRef:P,title:"\u6DFB\u52A0Docker\u73AF\u5883",onFinish:function(){var z=L()(c()().mark(function i(d){var M,y;return c()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return M={name:d.name,title:d.title,address:d.address,tlsCa:d.tlsCa,tlsCert:d.tlsCert,tlsKey:d.tlsKey,enableTLS:d.enableTLS},w.next=3,(0,K.ad)(M);case 3:return y=w.sent,n.onFinish&&n.onFinish(),w.abrupt("return",!0);case 6:case"end":return w.stop()}},i)}));return function(i){return z.apply(this,arguments)}}(),children:[(0,t.jsx)(f.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(i){var d="";if(i.target.value&&!G){var M,y=(0,b.N9)(i.target.value.trim(),{toneType:"none",type:"array"});d=y.join(""),(M=P.current)===null||M===void 0||M.setFieldValue("name",d)}}}}),(0,t.jsx)(f.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:G!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,t.jsx)(f.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,t.jsx)(r.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,t.jsx)(B.Z,{name:["enableTLS"],children:function(i){var d=i.enableTLS;if(d)return(0,t.jsxs)(E.Z,{gap:20,justify:"start",children:[(0,t.jsx)(F.Z,{name:"tlsCa",children:(0,t.jsx)(j.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(y){var S;return(S=P.current)===null||S===void 0||S.setFieldValue("tlsCa",y),!0},onLoad:function(y){if(y.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,t.jsx)(F.Z,{name:"tlsCert",children:(0,t.jsx)(j.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(y){var S;return(S=P.current)===null||S===void 0||S.setFieldValue("tlsCert",y),!0},onLoad:function(y){if(y.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,t.jsx)(F.Z,{name:"tlsKey",children:(0,t.jsx)(j.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(y){var S;return(S=P.current)===null||S===void 0||S.setFieldValue("tlsKey",y),!0},onLoad:function(y){if(y.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),h=o,u=e(43425),U=e(90078),N=e(10641),V=e(42075),$=e(96074),a=e(25593);function l(){var n=(0,O.useRef)(),s=(0,O.useRef)();return(0,t.jsx)(U._z,{header:{extra:[(0,t.jsx)(h,{ref:s,onFinish:function(){var p,T;!((p=n.current)===null||p===void 0)&&p.reloadAndRest&&((T=n.current)===null||T===void 0||T.reloadAndRest())}},"dockerEnvCreate")]},children:(0,t.jsx)(N.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(p,T,m,P,A){return(0,t.jsx)(V.Z,{split:(0,t.jsx)($.Z,{type:"vertical"}),children:!T.default&&(0,t.jsx)(a.Z.Link,{onClick:function(){var G;(G=s.current)===null||G===void 0||G.edit(T)},children:(0,t.jsx)(u.Z,{})},T.name)})}}],pagination:!1,request:L()(c()().mark(function v(){var p;return c()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,K.Kg)();case 2:return p=m.sent,m.abrupt("return",{data:p.data.list,total:p.data.list.length});case 4:case"end":return m.stop()}},v)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(p){return{disabled:p.default}}},actionRef:n,tableAlertOptionRender:function(p){var T=p.selectedRowKeys;return(0,t.jsx)(V.Z,{size:16,children:(0,t.jsx)(Z.Z,{danger:!0,type:"primary",action:function(){return(0,K._g)({name:T})},onSuccess:function(){var P,A;return!((P=n.current)===null||P===void 0)&&P.reloadAndRest&&((A=n.current)===null||A===void 0||A.reloadAndRest()),!0},onError:function(){var P,A;return!((P=n.current)===null||P===void 0)&&P.reset&&((A=n.current)===null||A===void 0||A.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})}})})}},86250:function(J,R,e){e.d(R,{Z:function(){return $}});var x=e(67294),c=e(93967),I=e.n(c),L=e(98423),Z=e(98065),_=e(53124),C=e(83559),g=e(83262);const f=["wrap","nowrap","wrap-reverse"],r=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],B=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],F=(a,l)=>{const n=l.wrap===!0?"wrap":l.wrap;return{[`${a}-wrap-${n}`]:n&&f.includes(n)}},D=(a,l)=>{const n={};return B.forEach(s=>{n[`${a}-align-${s}`]=l.align===s}),n[`${a}-align-stretch`]=!l.align&&!!l.vertical,n},E=(a,l)=>{const n={};return r.forEach(s=>{n[`${a}-justify-${s}`]=l.justify===s}),n};function O(a,l){return I()(Object.assign(Object.assign(Object.assign({},F(a,l)),D(a,l)),E(a,l)))}var b=O;const K=a=>{const{componentCls:l}=a;return{[l]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},j=a=>{const{componentCls:l}=a;return{[l]:{"&-gap-small":{gap:a.flexGapSM},"&-gap-middle":{gap:a.flexGap},"&-gap-large":{gap:a.flexGapLG}}}},t=a=>{const{componentCls:l}=a,n={};return f.forEach(s=>{n[`${l}-wrap-${s}`]={flexWrap:s}}),n},o=a=>{const{componentCls:l}=a,n={};return B.forEach(s=>{n[`${l}-align-${s}`]={alignItems:s}}),n},h=a=>{const{componentCls:l}=a,n={};return r.forEach(s=>{n[`${l}-justify-${s}`]={justifyContent:s}}),n},u=()=>({});var U=(0,C.I$)("Flex",a=>{const{paddingXS:l,padding:n,paddingLG:s}=a,v=(0,g.IX)(a,{flexGapSM:l,flexGap:n,flexGapLG:s});return[K(v),j(v),t(v),o(v),h(v)]},u,{resetStyle:!1}),N=function(a,l){var n={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&l.indexOf(s)<0&&(n[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,s=Object.getOwnPropertySymbols(a);v<s.length;v++)l.indexOf(s[v])<0&&Object.prototype.propertyIsEnumerable.call(a,s[v])&&(n[s[v]]=a[s[v]]);return n},$=x.forwardRef((a,l)=>{const{prefixCls:n,rootClassName:s,className:v,style:p,flex:T,gap:m,children:P,vertical:A=!1,component:X="div"}=a,G=N(a,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:W,direction:z,getPrefixCls:i}=x.useContext(_.E_),d=i("flex",n),[M,y,S]=U(d),w=A!=null?A:W==null?void 0:W.vertical,Y=I()(v,s,W==null?void 0:W.className,d,y,S,b(d,a),{[`${d}-rtl`]:z==="rtl",[`${d}-gap-${m}`]:(0,Z.n)(m),[`${d}-vertical`]:w}),H=Object.assign(Object.assign({},W==null?void 0:W.style),p);return T&&(H.flex=T),m&&!(0,Z.n)(m)&&(H.gap=m),M(x.createElement(X,Object.assign({ref:l,className:Y,style:H},(0,L.Z)(G,["justify","wrap","align"])),P))})}}]);
