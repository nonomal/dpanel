"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{1912:function(b,p,e){e.d(p,{Z:function(){return C}});var x=e(87462),i=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},l=g,_=e(84089),E=function(r,y){return i.createElement(_.Z,(0,x.Z)({},r,{ref:y,icon:l}))},R=i.forwardRef(E),C=R},80821:function(b,p,e){e.d(p,{Z:function(){return F}});var x=e(5574),i=e.n(x),g=e(24963),l=e(86738),_=e(14726),E=e(83062),R=e(67294),C=e(85893);function F(r){var y=(0,R.useState)(!1),O=i()(y,2),D=O[0],c=O[1],f=(0,R.useContext)(g.Z),m=f.lang,u=f.notice,S=f.message,M=function(){c(!0),r.action().then(function(L){if(c(!1),typeof r.onSuccess=="function"&&r.onSuccess(L),r.messageSuccess){var T="";typeof r.messageSuccess=="function"?T=r.messageSuccess(L):T=r.messageSuccess,T.indexOf(".")>-1&&(T=m(T)),r.asynced?S.info(T):S.success(T)}}).catch(function(L){c(!1),typeof r.onError=="function"&&r.onError(L)})};return r.confirm?(0,C.jsx)(l.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:m("notification.title.tip"),description:r.confirm,onConfirm:M,okText:"Yes",cancelText:"No",children:(0,C.jsx)(_.ZP,{disabled:r.disabled,icon:r.icon,loading:D,danger:r.danger,type:r.type,children:r.children})}):(0,C.jsx)(E.Z,{title:r.tips,children:(0,C.jsx)(_.ZP,{disabled:r.disabled,icon:r.icon,loading:D,onClick:M,danger:r.danger,type:r.type,children:r.children})})}},96042:function(b,p,e){e.d(p,{Z:function(){return F}});var x=e(97857),i=e.n(x),g=e(5574),l=e.n(g),_=e(75870),E=e(34041),R=e(67294),C=e(85893);function F(r){var y=(0,R.useState)([]),O=l()(y,2),D=O[0],c=O[1];(0,R.useEffect)(function(){(0,_.Ot)().then(function(m){console.log(m),m&&c(m.data.list)})},[]);var f={};return r.multiple&&(f.mode="multiple"),r.top&&(f.placement="topLeft"),(0,C.jsx)(E.Z,i()({onChange:function(u){if(Array.isArray(u)){var S=u.map(function(M){return D[M]});r.onChangeList&&r.onChangeList(S)}else r.onChange&&r.onChange(D[u])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u672C\u5730\u4F7F\u7528\u7559\u7A7A\u5373\u53EF",options:D.map(function(m,u){return{value:u,label:m.title+"("+m.serverAddress+")"}})},f))}},24963:function(b,p,e){var x=e(67294),i=(0,x.createContext)({});p.Z=i},31810:function(b,p,e){e.r(p),e.d(p,{default:function(){return me}});var x=e(19632),i=e.n(x),g=e(15009),l=e.n(g),_=e(99289),E=e.n(_),R=e(5574),C=e.n(R),F=e(90078),r=e(10641),y=e(37476),O=e(62370),D=e(5966),c=e(31418),f=e(14726),m=e(25593),u=e(42075),S=e(66309),M=e(96074),N=e(83062),L=e(84567),T=e(50136),I=e(67294),U=e(54006),W=e(18148),J=e(5251),V=e(80821),q=e(43425),ee=e(87462),te=e(3803),ne=e(84089),re=function(G,H){return I.createElement(ne.Z,(0,ee.Z)({},G,{ref:H,icon:te.Z}))},ae=I.forwardRef(re),ue=ae,se=e(58638),le=e(1912),oe=e(28307),ie=e(96042),Y=e(67255),ce=e(24963),de=e(3393),fe=e(93162),n=e(85893);function me(){var z=(0,I.useContext)(ce.Z),G=z.message,H=z.notice,Ce=z.lang,A=(0,I.useRef)(),ve=(0,I.useState)({force:!1}),X=C()(ve,2),he=X[0],ge=X[1],Ae=c.Z.useApp(),_e=(0,I.useState)(1),Q=C()(_e,2),w=Q[0],Ee=Q[1],k=(0,I.useRef)();return(0,I.useEffect)(function(){var h;(h=A.current)===null||h===void 0||h.reload()},[w]),(0,n.jsx)(F._z,{header:{extra:[(0,n.jsx)(U.Link,{to:"/image/create",children:(0,n.jsx)(f.ZP,{type:"primary",children:"\u521B\u5EFA&\u5BFC\u5165\u955C\u50CF"},"create")}),(0,n.jsx)(oe.Z,{onFinish:function(){var o,t;!((o=A.current)===null||o===void 0)&&o.reloadAndRest&&((t=A.current)===null||t===void 0||t.reloadAndRest())}},"remote")]},children:(0,n.jsx)(r.Z,{scroll:{x:"max-content"},rowKey:"Id",columns:[{title:"\u540D\u79F0",dataIndex:"title",render:function(o,t,d,j,a){var s=t.Id.substring(7,19);return t.Title&&(s=t.Title),(0,n.jsx)(m.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var v=E()(l()().mark(function Z(K){var B;return l()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,W.Fj)({tag:t.RepoTags[0],title:K});case 2:B=$.sent,Ee(w+1),G.success("\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return $.stop()}},Z)}));function P(Z){return v.apply(this,arguments)}return P}()},children:(0,n.jsx)(U.Link,{to:"/image/detail/"+t.Id,children:s},"edit")},"title-".concat(d))}},{title:"Tag",dataIndex:"tag",render:function(o,t,d,j){return(0,n.jsx)(u.Z,{direction:"vertical",style:{textAlign:"left"},children:t.RepoTags.map(function(a,s){return(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(S.Z,{color:"#2db7f5",children:(0,n.jsx)(m.Z.Text,{copyable:!0,style:{color:"#ffffff",maxWidth:"300px"},ellipsis:!0,title:a,children:a},s)},s),t.Containers>0&&(0,n.jsx)(S.Z,{color:"cyan",children:"\u4F7F\u7528\u4E2D"},"use-".concat(s))]},s)})},t.Id)}},{title:"\u67B6\u6784",width:80,render:function(o,t,d,j,a){if(t.Labels&&t.Labels["com.dpanel.image.arch"])return(0,n.jsx)(S.Z,{children:t.Labels["com.dpanel.image.arch"]},"arch"+t.Id)}},{title:"\u5C3A\u5BF8",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(o,t){return parseFloat(o.Size)-parseFloat(t.Size)},render:function(o,t,d,j){return(0,n.jsx)("div",{children:(0,J.FI)(parseFloat(t.Size))},t.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(o,t,d,j){return(0,n.jsx)("div",{children:(0,J.ZM)(t.Created*1e3)},t.Id)},sorter:function(o,t){return o.Created-t.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"150px",render:function(o,t,d,j){return(0,n.jsxs)(u.Z,{split:(0,n.jsx)(M.Z,{type:"vertical"}),children:[(0,n.jsx)(U.Link,{to:"/image/detail/"+t.Id,children:(0,n.jsx)(N.Z,{title:"\u7BA1\u7406",children:(0,n.jsx)(q.Z,{})})},"edit"),(0,n.jsx)(U.Link,{to:"/app/create/image?imageId="+t.RepoTags[0],children:(0,n.jsx)(N.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,n.jsx)(ue,{})})},"create")]})}}],request:function(){var h=E()(l()().mark(function o(t,d,j){var a;return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,W.KG)({tag:t.tag,title:t.title});case 2:if(a=v.sent,!(!a||!a.data||!a.data.list)){v.next=5;break}return v.abrupt("return",{data:[],success:!0,total:0});case 5:return a.data.list.map(function(P){var Z="";P.RepoTags.map(function(K){a.data.title[K]&&(Z=a.data.title[K])}),P.Title=Z}),v.abrupt("return",{data:a.data.list,success:!0,total:a.data.list.length});case 7:case"end":return v.stop()}},o)}));return function(o,t,d){return h.apply(this,arguments)}}(),pagination:(0,Y.O)(),search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:A,tableAlertOptionRender:function(o){var t=o.selectedRowKeys,d=o.selectedRows;return(0,n.jsxs)(u.Z,{size:16,children:[(0,n.jsx)(V.Z,{icon:(0,n.jsx)(se.Z,{}),action:function(){var a=[];return d.map(function(s){a.push.apply(a,i()(s.RepoTags))}),(0,de.Rb)({md5:a})},onSuccess:function(a){var s=d.map(function(P){return P.RepoTags[0]}),v=new Blob([a],{type:"application/tar"});(0,fe.saveAs)(v,s.join("-")+".tar")},messageSuccess:"\u6279\u91CF\u5BFC\u51FA\u6210\u529F",children:"\u5BFC\u51FA"}),(0,n.jsxs)(y.Y,{formRef:k,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,n.jsx)(f.ZP,{icon:(0,n.jsx)(le.Z,{}),children:"\u63A8\u9001"}),onFinish:function(){var j=E()(l()().mark(function a(s){var v,P,Z;return l()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,W.KX)({md5:t,registryId:s.registryId,newNamespace:s.newNamespace});case 2:return Z=B.sent,(v=A.current)===null||v===void 0||v.reload(),!((P=A.current)===null||P===void 0)&&P.clearSelected&&A.current.clearSelected(),B.abrupt("return",!0);case 6:case"end":return B.stop()}},a)}));return function(a){return j.apply(this,arguments)}}(),children:[(0,n.jsx)(O.Z,{name:"registryId",hidden:!0}),(0,n.jsx)(O.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,n.jsxs)(n.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,n.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,n.jsx)(ie.Z,{multiple:!0,top:!0,onChangeList:function(a){var s;(s=k.current)===null||s===void 0||s.setFieldValue("registryId",a.map(function(v){return v.id}))}})}),(0,n.jsx)(D.Z,{tooltip:"\u53EF\u4EE5\u901A\u8FC7\u6B64\u9879\u91CD\u65B0\u5B9A\u4E49\u547D\u540D\u7A7A\u95F4\uFF0Cdocker hub \u4E0D\u53D7\u8BE5\u914D\u7F6E\u7684\u5F71\u54CD\u3002 \u914D\u7F6E\u6B64\u9879\u540E mysql:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/mysql:latest\uFF0C dpanel/dpanel:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/dpanel:latest",label:"\u91CD\u5199\u975E\u5B98\u65B9\u4ED3\u5E93\u547D\u540D\u7A7A\u95F4",name:"newNamespace"})]}),(0,n.jsx)(V.Z,{danger:!0,type:"primary",action:function(){return(0,W.ao)({md5:t,force:he.force})},onSuccess:function(){var a,s;return!((a=A.current)===null||a===void 0)&&a.reloadAndRest&&((s=A.current)===null||s===void 0||s.reloadAndRest()),!0},onError:function(){var a,s;return!((a=A.current)===null||a===void 0)&&a.reset&&((s=A.current)===null||s===void 0||s.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,n.jsxs)(u.Z,{style:{width:280},direction:"vertical",children:[(0,n.jsx)(m.Z.Text,{children:"\u5220\u9664\u955C\u50CF\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,n.jsx)(L.Z,{name:"deleteVolume",onChange:function(a){return ge({force:a.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"})]})},tableExtraRender:function(){return(0,n.jsx)(T.Z,{mode:"horizontal",selectedKeys:["all"],items:[{label:(0,n.jsx)(U.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,n.jsx)(U.Link,{to:"/image/list/recycle",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})},toolBarRender:function(){return[(0,n.jsx)(V.Z,{action:function(){return(0,W.c7)()},onSuccess:function(){var t,d;return!((t=A.current)===null||t===void 0)&&t.reloadAndRest&&((d=A.current)===null||d===void 0||d.reloadAndRest()),!0},onError:function(){var t,d;return!((t=A.current)===null||t===void 0)&&t.reset&&((d=A.current)===null||d===void 0||d.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u672A\u4F7F\u7528\u6216\u662F\u672A\u8FD0\u884C\u7684\u955C\u50CF",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})]},columnsState:(0,Y.j)("image-list")})})}},75870:function(b,p,e){e.d(p,{Ot:function(){return E},ZH:function(){return C},ix:function(){return r},t1:function(){return O}});var x=e(15009),i=e.n(x),g=e(99289),l=e.n(g),_=e(54006);function E(c){return R.apply(this,arguments)}function R(){return R=l()(i()().mark(function c(f){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,_.request)("/api/common/registry/get-list",{method:"POST",data:f}));case 1:case"end":return u.stop()}},c)})),R.apply(this,arguments)}function C(c){return F.apply(this,arguments)}function F(){return F=l()(i()().mark(function c(f){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,_.request)("/api/common/registry/create",{method:"POST",data:f}));case 1:case"end":return u.stop()}},c)})),F.apply(this,arguments)}function r(c){return y.apply(this,arguments)}function y(){return y=l()(i()().mark(function c(f){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,_.request)("/api/common/registry/delete",{method:"POST",data:f}));case 1:case"end":return u.stop()}},c)})),y.apply(this,arguments)}function O(c){return D.apply(this,arguments)}function D(){return D=l()(i()().mark(function c(f){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,_.request)("/api/common/registry/get-detail",{method:"POST",data:f}));case 1:case"end":return u.stop()}},c)})),D.apply(this,arguments)}},67255:function(b,p,e){e.d(p,{O:function(){return x},j:function(){return i}});function x(){var g,l=parseInt((g=localStorage.getItem("dpanel-pagesize"))!==null&&g!==void 0?g:"0");return{showSizeChanger:!0,defaultPageSize:l!=null?l:20}}function i(g){var l="dpanel-table-column-".concat(g),_={};if(localStorage.getItem(l)){var E;_=JSON.parse((E=localStorage.getItem(l))!==null&&E!==void 0?E:"{}")}return{defaultValue:_,onChange:function(C){localStorage.setItem("dpanel-table-column-".concat(g),JSON.stringify(C))}}}}}]);
